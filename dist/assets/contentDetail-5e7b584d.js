import{d as T,u as V,b as r,m as A,o as D,D as N,a as i,c,i as l,t as f,k as h,g as u,w as y,q as g,f as M,F as S,j as F,K as G,r as k,x as $,_ as R}from"./index-8f9ccc2f.js";import{G as U,a as j}from"./getChapter-b3bf389b.js";import{M as q,r as z}from"./relpace-5762b57c.js";/* empty css                *//* empty css                  */import"./katex-4b21be29.js";import"./getVideo-88887dd2.js";const H={key:0,class:"article"},J={class:"article_detail",id:"article_detail"},K={class:"chapter_title"},L={key:0},O={class:"article_content"},P={class:"article_catalogue",id:"sidebar"},Y=["onClick"],Q=["href"],W="preview-only",X=T({__name:"contentDetail",setup(Z){const d=V(),a=r(0),n=r(),o=r(),v=r("");r([]);const w=e=>{k.push({name:"markdownEdit",params:{chapterId:e}})},x=e=>{k.push({name:"markdownAnswerEdit",params:{chapterId:e}})},_=r(),C=e=>{U(e).then(t=>{t.state==200&&(o.value=t.data,v.value=o.value.content,_.value=JSON.parse(o.value.catalogue),console.log(o.value)),setTimeout(()=>{console.log(o.value.id),z(o.value.id,null,null)},100)})},I=e=>{j(e).then(t=>{t.state==200&&(n.value=t.data)})},b=()=>{var e=document.getElementById("sidebar");window.scrollY>100?(e.style.position="fixed",e.style.top="0"):e.style.position="static"},p=e=>{document.getElementById(e).scrollIntoView({behavior:"smooth"})},E=()=>{const e=d.meta.scrollTo;e&&p(decodeURIComponent(e).slice(1))};return A(()=>{a.value=null,n.value=null,o.value=null,setTimeout(()=>{a.value=d.params.chapterId,I(a.value),C(a.value)},50)}),D(()=>{setTimeout(()=>{E()},500),window.onscroll=function(){b()}}),N(()=>{a.value=null,n.value=null,o.value=null}),(e,t)=>{const m=$;return n.value?(i(),c("div",H,[l("div",J,[l("div",K,[n.value?(i(),c("h1",L,f(n.value.name),1)):h("",!0),l("div",null,[u(m,{type:"primary",link:"",onClick:t[0]||(t[0]=s=>x(a.value))},{default:y(()=>t[2]||(t[2]=[g("答案预设",-1)])),_:1,__:[2]}),u(m,{type:"primary",link:"",onClick:t[1]||(t[1]=s=>w(a.value))},{default:y(()=>t[3]||(t[3]=[g("编辑内容",-1)])),_:1,__:[3]})])]),l("div",O,[u(M(q),{editorId:W,modelValue:v.value},null,8,["modelValue"])])]),l("div",P,[(i(!0),c(S,null,F(_.value,(s,B)=>(i(),c("div",{key:B,onClick:ee=>p(s.text)},[l("div",{class:G(["level","level-"+s.level])},[l("a",{href:"#"+s.text},f(s.text),9,Q)],2)],8,Y))),128))])])):h("",!0)}}});const ie=R(X,[["__scopeId","data-v-829b368c"]]);export{ie as default};
