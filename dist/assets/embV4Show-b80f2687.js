import{f as B}from"./index-9020ea85.js";import{d as C,b as y,aV as N,e as w,a,c as i,F as g,j as x,K as L,i as c,g as f,t as m,bc as E,bo as D,q as V,k as n,f as d,n as p,w as $,x as z,a8 as J,_ as R,z as U,o as O,u as H,m as M}from"./index-8f9ccc2f.js";import{m as S,_ as T,a as G,d as j,b as F,g as P,c as q,e as K,f as Q,h as W,i as X}from"./tracneline.vue_vue_type_script_setup_true_lang-e84559dc.js";import"./stuLab-819536eb.js";/* empty css                  *//* empty css                  */import"./lodash-56abab90.js";/* empty css                   */import"./browser-19b77043.js";import"./marked.esm-fed877e7.js";import"./katex-4b21be29.js";import"./purify.es-9c590e79.js";const Y={id:"videoGrid",class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Z=["onClick"],I={key:0,class:"flex items-start space-x-4"},ee={class:"video-icon"},ae={class:"flex-1"},te={class:"text-[16px] font-medium text-gray-900 mb-2"},oe={class:"text-[14px] h-[42px] text-gray-600 mb-3 line-clamp-2"},se={class:"h-[26px] flex flex-wrap gap-1 mb-2"},le={class:"flex items-center justify-between"},ne={class:"text-xs text-gray-500"},ie={key:0,class:"text-blue-600 font-medium",style:{"font-size":"12px"}},de={key:1,class:"text-green-600 font-medium",style:{"font-size":"12px"}},re={class:"flex flex-wrap gap-1 mb-2"},ce={class:"h-[516px] flow-root"},pe={class:"h-full"},ue={class:"text-[14px] h-[42px] text-gray-600 mt-4 line-clamp-2"},_e=C({__name:"videoGroup",props:{children:Array},setup(v){const u=v,s=y([]);N(()=>{let l=[];console.log(11111),console.log(u.children);for(let o=0;o<u.children.length;o++){let h=u.children[o];h.payload=JSON.parse(h.payload),l.push(h)}s.value=l});const t=y({visible:!1,compItem:null}),r=l=>{t.value.compItem=l,t.value.visible=!0},e=l=>{l.isReady=1,t.value.visible=!1};return(l,o)=>{const h=w("font-awesome-icon"),b=z,k=J;return a(),i("div",Y,[(a(!0),i(g,null,x(d(s)||[],(_,A)=>(a(),i("div",{key:A,class:L([{completed:_.payload.video.isReady==1},"video-card bg-white border-2 border-gray-200 rounded-lg p-4"]),onClick:Ae=>r(_)},[_.type=="VIDEO"?(a(),i("div",I,[c("div",ee,[f(h,{icon:"fas fa-play",size:"lg",class:"text-white",widthAuto:""})]),c("div",ae,[c("h4",te,m(_.payload.video.title),1),c("p",oe,m(_.payload.video.description),1),c("div",se,[E(c("span",{class:"knowledge-point-badge"},m(_.tagName),513),[[D,_.tagName]])]),c("div",le,[c("span",ne,[f(h,{icon:"fas fa-clock",class:"mr-1",style:{"font-size":"12px"}}),E(c("span",{style:{"font-size":"12px"}},m(_.payload.video.duration)+" 分钟",513),[[D,_.payload.video.duration]])]),_.payload.video.isReady==0?(a(),i("span",ie,"点击观看")):(a(),i("span",de,[f(h,{icon:"fas fa-check",class:"mr-1"}),o[2]||(o[2]=V(" 已完成 ",-1))]))])])])):n("",!0)],10,Z))),128)),d(t).visible?(a(),p(k,{key:0,modelValue:d(t).visible,"onUpdate:modelValue":o[1]||(o[1]=_=>d(t).visible=_),title:d(t).compItem.payload.video.title},{footer:$(()=>[d(t).compItem.payload.video.isReady==0?(a(),p(b,{key:0,type:"primary",onClick:o[0]||(o[0]=_=>e(d(t).compItem.payload.video))},{default:$(()=>o[3]||(o[3]=[V("标记为已完成",-1)])),_:1,__:[3]})):(a(),p(b,{key:1,type:"primary"},{default:$(()=>o[4]||(o[4]=[V("已完成",-1)])),_:1,__:[4]}))]),default:$(()=>[c("div",re,[E(c("span",{class:"knowledge-point-badge"},m(d(t).compItem.payload.video.tag),513),[[D,d(t).compItem.payload.video.tag]])]),c("div",ce,[c("div",pe,[f(S,{video:d(t).compItem.payload.video},null,8,["video"])])]),c("p",ue,m(d(t).compItem.payload.video.description),1)]),_:1},8,["modelValue","title"])):n("",!0)])}}});const ye=R(_e,[["__scopeId","data-v-6440c4ec"]]),ve=C({__name:"selectGroup",props:{children:Array},setup(v){const u=v,s=y([]);return N(()=>{let t=[];for(let r=0;r<u.children.length;r++){let e=u.children[r];e.payload=JSON.parse(e.payload),t.push(e)}s.value=t}),(t,r)=>(a(!0),i(g,null,x(d(s),(e,l)=>(a(),i("div",{key:l,class:L(l!=0?"mt-8":"")},[e.type=="MULTIPLECHOICE"?(a(),p(T,{key:0,index:l+1,payload:e.payload},null,8,["index","payload"])):n("",!0),e.type=="CHOICE"?(a(),p(G,{key:1,index:l+1,payload:e.payload},null,8,["index","payload"])):n("",!0)],2))),128))}}),he={__name:"commonGroup",props:{children:Array},setup(v){const u=v,s=y([]);return N(()=>{if(!u.children)return;let t=[];for(let r=0;r<u.children.length;r++){let e=u.children[r];if(e){const l=e;try{typeof l.payload=="string"&&(l.payload=JSON.parse(l.payload))}catch(o){console.warn("Failed to parse payload",o)}t.push(l)}}s.value=t}),(t,r)=>(a(!0),i(g,null,x(s.value,(e,l)=>(a(),i("div",{key:l,class:L(l!=0?"mt-8":"")},[e.type=="DEVICE"?(a(),p(j,{key:0,payload:e.payload},null,8,["payload"])):n("",!0),e.type=="TEXT"?(a(),p(F,{key:1,id:e.id.toString(),payload:e.payload},null,8,["id","payload"])):n("",!0),e.type=="GROUP"?(a(),p(P,{key:2,payload:e.payload},null,8,["payload"])):n("",!0),e.type=="QA"?(a(),p(q,{key:3,payload:e.payload},null,8,["payload"])):n("",!0),e.type=="VIDEO"?(a(),p(S,{key:4,video:e.payload.video},null,8,["video"])):n("",!0),e.type=="MULTIPLECHOICE"?(a(),p(T,{key:5,payload:e.payload},null,8,["payload"])):n("",!0),e.type=="CHOICE"?(a(),p(G,{key:6,payload:e.payload},null,8,["payload"])):n("",!0),e.type=="CIRCUIT"?(a(),p(K,{key:7,payload:e.payload},null,8,["payload"])):n("",!0),e.type=="RANGE"?(a(),p(Q,{key:8,payload:e.payload},null,8,["payload"])):n("",!0),e.type=="TABLE"?(a(),p(W,{key:9,labId:t.labId,compData:e,payload:e.payload,payloadList:s.value.filter(o=>o.type=="RANGE")},null,8,["labId","compData","payload","payloadList"])):n("",!0),e.type=="TRACELINE"?(a(),p(X,{key:10,labId:t.labId,compData:e,payload:e.payload,payloadList:s.value.filter(o=>o.type=="RANGE")},null,8,["labId","compData","payload","payloadList"])):n("",!0)],2))),128))}},fe={key:0,class:"book-lab-catalog-tree"},me={class:"node-name"},be={key:0,class:"components-content"},ge={key:0},xe={key:1},ke={key:2},$e={key:1,class:"card p-[32px]"},we={name:"BookLabRecursion"},Ce=C({...we,props:{treeData:{type:Array,required:!0,default:()=>[]}},setup(v){const u=v,s=y();return U(u.treeData,t=>{console.log("变化"),s.value=t}),O(()=>{s.value=u.treeData}),(t,r)=>{const e=w("font-awesome-icon"),l=w("BookLabRecursion",!0);return d(s)!=null?(a(),i("div",fe,[(a(!0),i(g,null,x(d(s),o=>(a(),i("div",{key:o.id,class:"catalog-node"},[c("div",{class:L(["node-header","node-header-"+o.level])},[f(e,{icon:o.icon,class:"mr-1"},null,8,["icon"]),c("div",me,m(o.name),1)],2),!o.hasChildren&&o.componentList!=null&&o.componentList.length>0?(a(),i("div",be,[o.type=="videoGroup"?(a(),i("div",ge,[f(ye,{children:o.componentList},null,8,["children"])])):o.type=="selectGroup"?(a(),i("div",xe,[f(ve,{children:o.componentList},null,8,["children"])])):(a(),i("div",ke,[f(he,{children:o.componentList},null,8,["children"])]))])):n("",!0),o.hasChildren?(a(),i("div",$e,[f(l,{"tree-data":o.children},null,8,["tree-data"])])):n("",!0)]))),128))])):n("",!0)}}});const Le=R(Ce,[["__scopeId","data-v-e0a75dd5"]]),Ee={key:0},De={key:0,class:"white-card"},Ve={class:"flex border-b border-gray-200"},Ne=["onClick"],Re={key:1,class:"white-card p-[32px]"},Oe=C({__name:"embV4Document",props:{lab:Object},setup(v){const u=v;y("#2563eb");const s=y();O(()=>{s.value=u.lab,console.log(s.value),s.value!=null&&s.value.children.length&&(t.value=JSON.parse(JSON.stringify(s.value.children[0])),setTimeout(()=>{r.value=!0},100))});const t=y(),r=y(!1),e=l=>{r.value=!1,t.value=null,t.value=JSON.parse(JSON.stringify(s.value.children[l])),console.log(t.value),setTimeout(()=>{r.value=!0},100)};return(l,o)=>{const h=w("font-awesome-icon");return d(s)!=null?(a(),i("div",Ee,[d(s).children.length>0?(a(),i("div",De,[c("div",Ve,[(a(!0),i(g,null,x(d(s).children,(b,k)=>(a(),i("button",{key:k,class:"flex-1 py-8 px-12 text-center font-medium tab-transition border-b-2 border-blue-600 text-blue-600",onClick:_=>e(k)},[b.icon?(a(),p(h,{key:0,icon:b.icon,class:"mr-2"},null,8,["icon"])):n("",!0),c("span",null,m(b.name),1)],8,Ne))),128))])])):n("",!0),d(t)!=null?(a(),i("div",Re,[d(r)?(a(),p(Le,{key:0,"tree-data":d(t).children,class:"ist-theam"},null,8,["tree-data"])):n("",!0)])):n("",!0)])):n("",!0)}}});const Se=R(Oe,[["__scopeId","data-v-6774b7f6"]]),Te={class:"bg-gray-50 min-h-full"},Ge={class:"py-8 px-16 mx-auto"},We={__name:"embV4Show",setup(v){const u=H(),s=y(u.params.labId),t=y();M(()=>{r()});const r=async()=>{t.value=(await B(s.value)).data};return(e,l)=>(a(),i("div",Te,[c("div",Ge,[d(t)!=null?(a(),p(Se,{key:0,lab:d(t)},null,8,["lab"])):n("",!0)])]))}};export{We as default};
