import{h as Q,d as D,b as f,z as X,o as M,a as d,c as m,g as e,f as q,w as n,F as w,j as S,n as I,k as U,ac as te,b3 as ae,a5 as oe,a6 as ue,_ as J,i as x,s as P,$ as ne,e as de,q as E,t as G,a7 as se,x as ie,a0 as re,ab as me,ad as ve}from"./index-8f9ccc2f.js";import{P as pe}from"./detail-3974838b.js";import{u as K,b as ce,e as be,G as _e,S as fe}from"./getTaskStudentGroup-1a06cf67.js";import{v as Ve}from"./v5-b62ae20a.js";import{s as z,D as he}from"./browser-19b77043.js";/* empty css               */import"./marked.esm-fed877e7.js";import"./katex-4b21be29.js";import"./purify.es-9c590e79.js";function xe(){return Q({url:"/louyongle/all",method:"GET"})}function ye(V){return Q({url:"/louyongle/add",method:"POST",data:V})}const ge="6ba7b810-9dad-11d1-80b4-00c04fd430c8";var B=(V=>(V.TEXT="TEXT",V.QA="QA",V.CHOICE="CHOICE",V.TABLE="TABLE",V.TRACELINE="TRACELINE",V))(B||{});const Ce=V=>Ve(V.toString(),ge);function ke(V,C,y){return new Promise((i,o)=>{i()})}const Te=["id","innerHTML"],O=D({__name:"textPreview",props:{id:String,content:String},setup(V){const C=V,y=f();function i(o){return he.sanitize(o)}return X(()=>C.content,(o,p)=>{o&&(y.value=i(z.parse(o)).replace(/<p[^>]*>\s*<\/p>/g,""))}),M(()=>{y.value=i(z.parse(C.content)).replace(/<p[^>]*>\s*<\/p>/g,"")}),(o,p)=>(d(),m("div",{id:V.id,innerHTML:y.value},null,8,Te))}}),we=["id"],Se={key:0},Ie={key:1},Ue=D({__name:"choiceStu",props:{blockVo:Object},setup(V){const C=V,y=f();K();const i=f({id:0,STSId:0,status:0,sort:0,type:"",title:"",content:"",catalogue:"",payload:""}),o=f(),p=v=>{};return M(()=>{i.value=C.blockVo,i.value&&(o.value=JSON.parse(i.value.payload))}),(v,h)=>{const T=te,g=ae,k=oe,t=ue;return o.value?(d(),m("div",{key:0,ref_key:"choiceRef",ref:y,id:"block"+i.value.id,class:"ist-theam mt-6 p-5 bg-gray-50 rounded-lg border-l-4 border-blue-500 scroll-mt-[80px]",tabindex:"0",onFocus:h[4]||(h[4]=c=>p(o.value.cell))},[e(O,{id:"block-"+q(Ce)(i.value.id),content:o.value.question==""?"问题":o.value.question},null,8,["id","content"]),o.value.isMultiple?(d(),m("div",Se,[e(g,{class:"select-item scroll-mt-[80px]",id:o.value.cell.id,disabled:"",modelValue:o.value.cell.stuValue.array,"onUpdate:modelValue":h[0]||(h[0]=c=>o.value.cell.stuValue.array=c)},{default:n(()=>[(d(!0),m(w,null,S(o.value.options,(c,s)=>(d(),I(T,{class:"rounded hover:bg-gray-100",key:"check-"+i.value.id+"-"+s,label:c,style:{height:"auto"}},{default:n(()=>[e(O,{id:"option-"+i.value.id+"-check-"+s,content:c,class:"scroll-mt-[80px]"},null,8,["id","content"])]),_:2},1032,["label"]))),128))]),_:1},8,["id","modelValue"]),e(g,{class:"select-item scroll-mt-[80px] mt-4 bg-green-100",id:o.value.cell.id,disabled:"",modelValue:o.value.cell.presetValue.array,"onUpdate:modelValue":h[1]||(h[1]=c=>o.value.cell.presetValue.array=c)},{default:n(()=>[(d(!0),m(w,null,S(o.value.options,(c,s)=>(d(),I(T,{class:"rounded hover:bg-gray-100",key:"check-"+i.value.id+"-"+s,label:c,style:{height:"auto"}},{default:n(()=>[e(O,{id:"option-"+i.value.id+"-check-"+s,content:c,class:"scroll-mt-[80px]"},null,8,["id","content"])]),_:2},1032,["label"]))),128))]),_:1},8,["id","modelValue"])])):(d(),m("div",Ie,[e(t,{class:"select-item scroll-mt-[80px]",id:o.value.cell.id,disabled:"",modelValue:o.value.cell.stuValue.array[0],"onUpdate:modelValue":h[2]||(h[2]=c=>o.value.cell.stuValue.array[0]=c)},{default:n(()=>[(d(!0),m(w,null,S(o.value.options,(c,s)=>(d(),I(k,{class:"rounded hover:bg-gray-100",label:c,style:{height:"auto"}},{default:n(()=>[e(O,{id:"option-"+i.value.id+"-radio-"+s,content:c,class:"scroll-mt-[80px]"},null,8,["id","content"])]),_:2},1032,["label"]))),256))]),_:1},8,["id","modelValue"]),e(t,{class:"select-item scroll-mt-[80px] mt-4 bg-green-100",id:o.value.cell.id,disabled:"",modelValue:o.value.cell.presetValue.array[0],"onUpdate:modelValue":h[3]||(h[3]=c=>o.value.cell.presetValue.array[0]=c)},{default:n(()=>[(d(!0),m(w,null,S(o.value.options,(c,s)=>(d(),I(k,{class:"rounded hover:bg-gray-100",label:c,style:{height:"auto"}},{default:n(()=>[e(O,{id:"option-"+i.value.id+"-radio-"+s,content:c,class:"scroll-mt-[80px]"},null,8,["id","content"])]),_:2},1032,["label"]))),256))]),_:1},8,["id","modelValue"])]))],40,we)):U("",!0)}}});const Oe=J(Ue,[["__scopeId","data-v-1afd9703"]]),Ee=["id"],Ne={key:0,class:"table-show-content"},Ge={key:0},Le=["colspan"],$e={style:{display:"flex","flex-direction":"row"}},Fe=["id"],Ae=["id"],De=D({__name:"tableStu",props:{blockVo:Object},setup(V){const C=V;f(!1);const y=f(),i=K(),o=f({id:0,STSId:0,status:0,sort:0,type:"",title:"",content:"",catalogue:"",payload:""}),p=f(),v=f();X(()=>i.hasNewVal,async T=>{var g,k,t;if(T&&v.value){if(i.getCellId!=v.value.id)return;((g=v.value)==null?void 0:g.type)=="string"?(v.value.stuValue.string=i.getSelectedValue,console.log("取到实验设备值："+v.value.stuValue.string),i.setHasNewVal(!1),await h(v.value.id),v.value=null):((k=v.value)==null?void 0:k.type)=="number"?(v.value.stuValue.number=i.getSelectedValue,console.log("取到实验设备值："+v.value.stuValue.number),i.setHasNewVal(!1),await h(v.value.id),v.value=null):(P.warning("不支持的数据类型。"),console.log("不支持的数据类型。需要的数据类型："+((t=v.value)==null?void 0:t.type)),v.value=null),v.value=null}});const h=async T=>{console.log("change"+T),o.value.payload=JSON.stringify(p.value),await ke(o.value,i.getTaskId)};return M(()=>{o.value=C.blockVo,o.value&&(p.value=JSON.parse(o.value.payload),console.log(p.value))}),(T,g)=>{var t,c;const k=ne;return p.value?(d(),m("div",{key:0,ref_key:"tableRef",ref:y,id:"block"+o.value.id,class:"ist-theam scroll-mt-[80px]"},[p.value.question!==""&&p.value.question!==null?(d(),m("div",Ne,[e(O,{id:"table-view-question"+o.value.id,content:p.value.question},null,8,["id","content"])])):U("",!0),x("table",null,[x("thead",null,[p.value.table.tableName!==""&&p.value.table.tableName!==null?(d(),m("tr",Ge,[x("th",{colspan:(t=p.value.table)==null?void 0:t.tableHeader.length},[e(O,{id:"table-view-tablename"+o.value.id,content:p.value.table.tableName},null,8,["id","content"])],8,Le)])):U("",!0),x("tr",null,[(d(!0),m(w,null,S(p.value.table.tableHeader,(s,F)=>(d(),m("th",null,[x("div",$e,[e(O,{id:s.id,content:s.colName},null,8,["id","content"])])]))),256))])]),x("tbody",null,[(d(!0),m(w,null,S((c=p.value.table)==null?void 0:c.tableColnum[0].length,s=>{var F;return d(),m("tr",null,[(d(!0),m(w,null,S((F=p.value.table)==null?void 0:F.tableColnum,(_,H)=>(d(),m("td",null,[_[s-1].isInput&&!_[s-1].autoGet?(d(),m("div",{key:0,id:_[s-1].id,style:{padding:"2px"},class:"scroll-mt-[80px]"},[e(k,{modelValue:_[s-1].stuValue[_[s-1].type],"onUpdate:modelValue":A=>_[s-1].stuValue[_[s-1].type]=A,disabled:""},null,8,["modelValue","onUpdate:modelValue"])],8,Fe)):_[s-1].isInput&&_[s-1].autoGet?(d(),m("div",{key:1,id:_[s-1].id,class:"scroll-mt-[80px]"},[e(k,{modelValue:_[s-1].stuValue[_[s-1].type],"onUpdate:modelValue":A=>_[s-1].stuValue[_[s-1].type]=A,disabled:""},{append:n(()=>g[0]||(g[0]=[x("button",{class:"text-blue-600",disabled:""},"获取",-1)])),_:2},1032,["modelValue","onUpdate:modelValue"])],8,Ae)):(d(),I(O,{key:2,id:_[s-1].id,content:_[s-1].presetValue[_[s-1].type]==""||_[s-1].presetValue[_[s-1].type]==null?"<br />":_[s-1].presetValue[_[s-1].type]},null,8,["id","content"]))]))),256))])}),256))])])],8,Ee)):U("",!0)}}});const Me=J(De,[["__scopeId","data-v-a14df271"]]),He={key:0,class:"section-item mb-6"},Re={class:"block-container"},je=D({__name:"sectionView",props:{section:Object},setup(V){const C=V,y=f(),i=f([]);return M(()=>{y.value=C.section,y.value&&y.value.blockVoList?i.value=y.value.blockVoList:P.error("数据加载失败")}),(o,p)=>i.value?(d(),m("div",He,[(d(!0),m(w,null,S(i.value,(v,h)=>(d(),m("div",Re,[v.type==q(B).CHOICE?(d(),I(Oe,{key:0,blockVo:v},null,8,["blockVo"])):U("",!0),v.type==q(B).TABLE?(d(),I(Me,{key:1,blockVo:v},null,8,["blockVo"])):U("",!0)]))),256))])):U("",!0)}}),qe={class:"w-full flex flex-row"},Be={class:"w-full bg-cyan-100 h-screen flex flex-col p-4"},Je={class:"w-full h-[50vh] p-4"},Pe={class:"h-[50px]"},ze={class:"h-[calc(100%-50px-10vh)] overflow-auto"},Qe={class:"h-full flex flex-col"},Xe={class:"h-[10vh] overflow-auto bg-blue-100 pt-8"},Ke={class:"w-full h-[50vh] overflow-auto p-4"},We={class:"w-full bg-blue-100 h-screen flex flex-col p-4"},Ye={class:"w-full h-[50vh] overflow-auto p-4"},Ze={key:0,ref:"lab",class:"h-[50vh] overflow-auto"},el=["id"],ll={class:"text-2xl font-bold mb-6 flex items-center"},tl={class:"mb-8 overflow-x-auto"},al={class:"flex space-x-2 md:space-x-4 min-w-max"},ol={class:"px-3 py-1 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-full text-sm font-medium transition-colors"},ul=["id"],nl=D({__name:"emdv2Grade",setup(V){const C=f(162),y=f(915),i=f(),o=f(),p=f(),v=f(),h=f(),T=f(),g=f(),k=f(),t=f(),c=f({stuId:null,studentName:"",studentId:"",yuxiOne:0,yuxiTwo:0,yuxiThree:0,kehouOne:0,kehouTwo:0,kehouThree:0,choiceOne:0,choiceTwo:0,choiceThree:0,choiceFour:0,tableOneCol1:0,tableOneCol2:0,tableOneCol3:0,tableTwoCol1:0,tableTwoCol2:0,tableTwoCol3:0,tableTwoCol4:0,tableThreeCol1:0,tableThreeCol2:0,tableThreeCol3:0,tableThreeCol4:0,tableThreeCol5:0,tableThreeCol6:0,tableFourCol1:0,tableFourCol2:0}),s=()=>{pe(C.value).then(b=>{b.state==200&&(o.value=b.data,T.value=o.value.slice(142))})},F=b=>i.value&&b.id==i.value.id?"primary":k.value&&k.value.has(b.id)?"success":"",_=b=>{i.value=b,p.value=null,v.value=null,h.value=null,t.value=JSON.parse(JSON.stringify(c)),t.value.stuId=i.value.id,t.value.studentName=i.value.studentName,t.value.studentId=i.value.studentId,Y(b.id,y.value),W(b.id,y.value),A(b.id,y.value)},H=()=>{T.value=o.value},A=(b,l)=>{be(b,l).then(u=>{u.state==200&&(p.value=u.data.labModelVoList)})},W=(b,l)=>{_e(b,l).then(u=>{u.state==200&&(v.value=u.data)})},Y=(b,l)=>{fe(l,b).then(u=>{u.state==200&&(u.data!=null&&(h.value=u.data.groupStudents),h.value!=null&&(T.value=o.value.filter(L=>h.value.some(r=>r.id===L.id))))})},Z=()=>{const b=[];h.value!=null?h.value.forEach(l=>{let u=JSON.parse(JSON.stringify(t.value));u.stuId=l.id,u.studentName=l.studentName,u.studentId=l.studentId,b.push(u)}):b.push(t.value),ye(b).then(l=>{l.state==200&&(P.success("已保存"),g.value=l.data,g.value.length>0&&(k.value=new Set(g.value.map(u=>u.stuId))),H())})};return M(()=>{xe().then(b=>{b.state==200&&(g.value=b.data,g.value.length>0&&(k.value=new Set(g.value.map(l=>l.stuId))))})}),(b,l)=>{const u=se,L=ie,r=re,N=me,ee=ve,le=de("font-awesome-icon");return d(),m("div",qe,[x("div",Be,[x("div",Je,[x("div",Pe,[e(u,{modelValue:C.value,"onUpdate:modelValue":l[0]||(l[0]=a=>C.value=a)},null,8,["modelValue"]),e(L,{type:"primary",onClick:s},{default:n(()=>l[26]||(l[26]=[E("获取学生列表",-1)])),_:1,__:[26]})]),x("div",ze,[x("div",Qe,[(d(!0),m(w,null,S(T.value,(a,$)=>(d(),I(L,{class:"m-2",onClick:R=>_(a),type:F(a)},{default:n(()=>[E(G(a.studentId)+"_"+G(a.studentName),1)]),_:2},1032,["onClick","type"]))),256))])]),x("div",Xe,[e(L,{onClick:H},{default:n(()=>l[27]||(l[27]=[E("清除过滤",-1)])),_:1,__:[27]})])]),x("div",Ke,[t.value?(d(),I(ee,{key:0,model:t.value,"label-width":"auto"},{default:n(()=>[e(r,{label:"id"},{default:n(()=>[E(G(t.value.stuId),1)]),_:1}),e(r,{label:"姓名"},{default:n(()=>[E(G(t.value.studentName),1)]),_:1}),e(r,{label:"学号"},{default:n(()=>[E(G(t.value.studentId),1)]),_:1}),e(r,{label:"课前预习1"},{default:n(()=>[e(u,{modelValue:t.value.yuxiOne,"onUpdate:modelValue":l[1]||(l[1]=a=>t.value.yuxiOne=a),min:0,max:2,step:2},null,8,["modelValue"])]),_:1}),e(r,{label:"课前预习2"},{default:n(()=>[e(u,{modelValue:t.value.yuxiTwo,"onUpdate:modelValue":l[2]||(l[2]=a=>t.value.yuxiTwo=a),min:0,max:2,step:2},null,8,["modelValue"])]),_:1}),e(r,{label:"课前预习3"},{default:n(()=>[e(u,{modelValue:t.value.yuxiThree,"onUpdate:modelValue":l[3]||(l[3]=a=>t.value.yuxiThree=a),min:0,max:2,step:2},null,8,["modelValue"])]),_:1}),e(N),e(r,{label:"课后1"},{default:n(()=>[e(u,{modelValue:t.value.kehouOne,"onUpdate:modelValue":l[4]||(l[4]=a=>t.value.kehouOne=a),min:0,max:5,step:5},null,8,["modelValue"])]),_:1}),e(r,{label:"课后2"},{default:n(()=>[e(u,{modelValue:t.value.kehouTwo,"onUpdate:modelValue":l[5]||(l[5]=a=>t.value.kehouTwo=a),min:0,max:5,step:5},null,8,["modelValue"])]),_:1}),e(r,{label:"课后3"},{default:n(()=>[e(u,{modelValue:t.value.kehouThree,"onUpdate:modelValue":l[6]||(l[6]=a=>t.value.kehouThree=a),min:0,max:5,step:5},null,8,["modelValue"])]),_:1}),e(N),e(r,{label:"表1——1"},{default:n(()=>[e(u,{modelValue:t.value.tableOneCol1,"onUpdate:modelValue":l[7]||(l[7]=a=>t.value.tableOneCol1=a),min:0,max:1,step:1},null,8,["modelValue"])]),_:1}),e(r,{label:"表1——2"},{default:n(()=>[e(u,{modelValue:t.value.tableOneCol2,"onUpdate:modelValue":l[8]||(l[8]=a=>t.value.tableOneCol2=a),min:0,max:1,step:1},null,8,["modelValue"])]),_:1}),e(r,{label:"表1——3"},{default:n(()=>[e(u,{modelValue:t.value.tableOneCol3,"onUpdate:modelValue":l[9]||(l[9]=a=>t.value.tableOneCol3=a),min:0,max:2,step:2},null,8,["modelValue"])]),_:1}),e(N),e(r,{label:"选择1"},{default:n(()=>[e(u,{modelValue:t.value.choiceOne,"onUpdate:modelValue":l[10]||(l[10]=a=>t.value.choiceOne=a),min:0,max:2,step:2},null,8,["modelValue"])]),_:1}),e(r,{label:"选择2"},{default:n(()=>[e(u,{modelValue:t.value.choiceTwo,"onUpdate:modelValue":l[11]||(l[11]=a=>t.value.choiceTwo=a),min:0,max:2,step:2},null,8,["modelValue"])]),_:1}),e(r,{label:"选择3"},{default:n(()=>[e(u,{modelValue:t.value.choiceThree,"onUpdate:modelValue":l[12]||(l[12]=a=>t.value.choiceThree=a),min:0,max:2,step:2},null,8,["modelValue"])]),_:1}),e(N),e(r,{label:"表2——1"},{default:n(()=>[e(u,{modelValue:t.value.tableTwoCol1,"onUpdate:modelValue":l[13]||(l[13]=a=>t.value.tableTwoCol1=a),min:0,max:2,step:2},null,8,["modelValue"])]),_:1}),e(r,{label:"表2——2"},{default:n(()=>[e(u,{modelValue:t.value.tableTwoCol2,"onUpdate:modelValue":l[14]||(l[14]=a=>t.value.tableTwoCol2=a),min:0,max:1,step:1},null,8,["modelValue"])]),_:1}),e(r,{label:"表2——3"},{default:n(()=>[e(u,{modelValue:t.value.tableTwoCol3,"onUpdate:modelValue":l[15]||(l[15]=a=>t.value.tableTwoCol3=a),min:0,max:2,step:2},null,8,["modelValue"])]),_:1}),e(r,{label:"表2——4"},{default:n(()=>[e(u,{modelValue:t.value.tableTwoCol4,"onUpdate:modelValue":l[16]||(l[16]=a=>t.value.tableTwoCol4=a),min:0,max:2,step:2},null,8,["modelValue"])]),_:1}),e(N),e(r,{label:"表3——1"},{default:n(()=>[e(u,{modelValue:t.value.tableThreeCol1,"onUpdate:modelValue":l[17]||(l[17]=a=>t.value.tableThreeCol1=a),min:0,max:1,step:.1},null,8,["modelValue"])]),_:1}),e(r,{label:"表3——2"},{default:n(()=>[e(u,{modelValue:t.value.tableThreeCol2,"onUpdate:modelValue":l[18]||(l[18]=a=>t.value.tableThreeCol2=a),min:0,max:1,step:.1},null,8,["modelValue"])]),_:1}),e(r,{label:"表3——3"},{default:n(()=>[e(u,{modelValue:t.value.tableThreeCol3,"onUpdate:modelValue":l[19]||(l[19]=a=>t.value.tableThreeCol3=a),min:0,max:1,step:.1},null,8,["modelValue"])]),_:1}),e(r,{label:"表3——4"},{default:n(()=>[e(u,{modelValue:t.value.tableThreeCol4,"onUpdate:modelValue":l[20]||(l[20]=a=>t.value.tableThreeCol4=a),min:0,max:1,step:.1},null,8,["modelValue"])]),_:1}),e(r,{label:"表3——5"},{default:n(()=>[e(u,{modelValue:t.value.tableThreeCol5,"onUpdate:modelValue":l[21]||(l[21]=a=>t.value.tableThreeCol5=a),min:0,max:1,step:.1},null,8,["modelValue"])]),_:1}),e(r,{label:"表3——6"},{default:n(()=>[e(u,{modelValue:t.value.tableThreeCol6,"onUpdate:modelValue":l[22]||(l[22]=a=>t.value.tableThreeCol6=a),min:0,max:1,step:.1},null,8,["modelValue"])]),_:1}),e(N),e(r,{label:"表4——1"},{default:n(()=>[e(u,{modelValue:t.value.tableFourCol1,"onUpdate:modelValue":l[23]||(l[23]=a=>t.value.tableFourCol1=a),min:0,max:2,step:2},null,8,["modelValue"])]),_:1}),e(r,{label:"表4——2"},{default:n(()=>[e(u,{modelValue:t.value.tableFourCol2,"onUpdate:modelValue":l[24]||(l[24]=a=>t.value.tableFourCol2=a),min:0,max:2,step:2},null,8,["modelValue"])]),_:1}),e(N),e(r,{label:"选择4"},{default:n(()=>[e(u,{modelValue:t.value.choiceFour,"onUpdate:modelValue":l[25]||(l[25]=a=>t.value.choiceFour=a),min:0,max:2,step:2},null,8,["modelValue"])]),_:1}),e(r,null,{default:n(()=>[e(L,{size:"small",onClick:Z},{default:n(()=>l[28]||(l[28]=[E("保存",-1)])),_:1,__:[28]})]),_:1})]),_:1},8,["model"])):U("",!0)])]),x("div",We,[x("div",Ye,[v.value?(d(),I(ce,{key:0,chatId:v.value},null,8,["chatId"])):U("",!0)]),p.value?(d(),m("div",Ze,[(d(!0),m(w,null,S(p.value,(a,$)=>(d(),m("div",{key:"module-"+$,class:"model-item scroll-mt-[80px] card p-8 mb-8",id:"module-"+$},[x("div",ll,[e(le,{icon:a.icon,class:"text-blue-600 mr-3"},null,8,["icon"]),E(" "+G(a.name),1)]),x("div",tl,[x("div",al,[(d(!0),m(w,null,S(p.value[$].sectionVoList,(R,j)=>(d(),m("button",ol,G("步骤"+(j+1)),1))),256))])]),(d(!0),m(w,null,S(p.value[$].sectionVoList,(R,j)=>(d(),m("div",null,[x("div",{class:"section-container border rounded-lg mb-6 p-6 scroll-mt-[80px]",id:"module-"+$+"step-"+j},[e(je,{section:R},null,8,["section"])],8,ul)]))),256))],8,el))),128))],512)):U("",!0)])])}}});const _l=J(nl,[["__scopeId","data-v-6f63b8b4"]]);export{_l as default};
