import{d as A,u as k,b as t,m as C,o as T,D as G,a as S,c as O,ay as N,L as u}from"./index-8f9ccc2f.js";import{c as j}from"./currentProject-a7d14fe5.js";import{s as _}from"./sameCaseProjects-030380d6.js";const z={class:"project"},I=A({__name:"index",setup(E){const d=k().params.projectId;t([]);const a=t({averageGrade:null,numberOfCompleter:null,numberOfParticipant:null,personnelDistributions:[{taskNum:null,studentNum:null}],taskAverages:[{taskNum:null,averageGrade:null}],taskMedians:[{taskNum:null,medianGrade:null}],tagsCount:[{item:null,count:null}]}),l=t({historyAverageGrade:null,numberOfCompleter:null,numberOfParticipant:null,taskAverages:[{taskNum:null,averageGrade:null}],taskMedians:[{taskNum:null,medianGrade:null}],taskTagCountList:[{taskNum:null,tagsCount:[{item:null,count:null}]}],tagsCount:[{item:null,count:null}]}),c=t([]),p=t([]),m=t([]),v=t([]),h=t([]),f=t([]),g=t([]);C(()=>{j(d).then(i=>{i.state==200&&(a.value=i.data,p.value.push(a.value.averageGrade))}),_(d).then(i=>{if(i.state==200){l.value=i.data,c.value.push(l.value.historyAverageGrade);for(let e=0;e<l.value.taskAverages.length;e++)m.value.push("任务"+a.value.taskAverages[e].taskNum),v.value.push(a.value.taskAverages[e].averageGrade),h.value.push(l.value.taskAverages[e].averageGrade);for(let e=0;e<a.value.tagsCount.length;e++)f.value.push(a.value.tagsCount[e].item),g.value.push(a.value.tagsCount[e].count)}})});const y={xAxis:{type:"value",show:!1},yAxis:{type:"category",data:["项目成绩平均值"],show:!1},grid:{left:"3%"},tooltip:{},series:[{data:c.value,name:"历史项目",type:"bar",label:{show:!0,precision:1,position:"right",valueAnimation:!0},itemStyle:{color:"#fbedd0",borderRadius:[0,20,20,0]},center:["50%","60%"],emphasis:{itemStyle:{color:"#f4a901"}}},{data:p.value,name:"当前项目",type:"bar",label:{show:!0,precision:1,position:"right",valueAnimation:!0},itemStyle:{color:"#c1dfdf",borderRadius:[0,20,20,0]},center:["50%","60%"],emphasis:{itemStyle:{color:"#33b8b9"}}}]},b={xAxis:{type:"value",show:!1},yAxis:{type:"category",data:m.value,show:!1},grid:{left:"3%"},tooltip:{},series:[{data:h.value,name:"历史项目",type:"bar",label:{show:!0,precision:1,position:"right",valueAnimation:!0},itemStyle:{color:"#fbedd0",borderRadius:[0,20,20,0]},emphasis:{itemStyle:{color:"#f4a901"}}},{data:v.value,name:"当前项目",type:"bar",label:{show:!0,precision:1,position:"right",valueAnimation:!0},itemStyle:{color:"#c1dfdf",borderRadius:[0,20,20,0]},emphasis:{itemStyle:{color:"#33b8b9"}}}]},x={xAxis:{type:"category",data:f.value},yAxis:{type:"value",show:!1},label:{show:!0,precision:1,position:"top",valueAnimation:!0},series:[{data:g.value,type:"bar",itemStyle:{color:"#c1dfdf",borderRadius:[5,5,0,0]},emphasis:{itemStyle:{color:"#33b8b9"}}}],tooltip:{}};let o=null,n=null,s=null;function r(){o&&(o.dispose(),o=null),n&&(n.dispose(),n=null),s&&(s.dispose(),s=null)}function w(){o=u(document.getElementById("chartOne")),n=u(document.getElementById("chartTwo")),s=u(document.getElementById("chartThree")),o.setOption(y),n.setOption(b),s.setOption(x),window.addEventListener("resize",function(){o.resize(),n.resize(),s.resize()}),window.addEventListener("popstate",function(){r()})}return T(()=>{r(),setTimeout(()=>{w()},2500)}),G(()=>{r()}),(i,e)=>(S(),O("div",z,e[0]||(e[0]=[N('<div style="display:flex;flex-direction:column;padding:10px;font-size:14px;"><h2>项目历史平均分数与当前对比</h2><div id="chartOne" style="min-height:200px;"></div></div><div style="display:flex;flex-direction:column;padding:10px;font-size:14px;"><h2>项目历史各任务平均分数与当前对比</h2><div id="chartTwo" style="min-height:500px;"></div></div><div style="display:flex;flex-direction:column;padding:10px;font-size:14px;"><h2>当前项目tag点出现数量</h2><div id="chartThree" style="min-height:400px;"></div></div>',3)])))}});export{I as default};
