import{d as j,u as P,b as v,m as G,aD as L,s as m,a as i,c as u,i as o,g as l,f as C,p as q,w as c,F as k,j as x,k as E,aj as B,t as V,q as N,B as O,P as R,E as U,v as z,N as A,x as J,O as K,a8 as Q,_ as W}from"./index-8f9ccc2f.js";import{M as X}from"./myCourses-58c4afc4.js";const Y={class:"contents"},Z={class:"card_cover contents_overlay"},ee=["src"],ae={class:"overlay-text"},te={class:"card_info"},le=["onClick"],oe=["title"],ne={class:"contents",style:{"margin-top":"2em"}},se={class:"card_cover contents_overlay"},ce=["src"],re={class:"overlay-text"},de={class:"card_info"},ie=["onClick"],ue=["title"],_e=j({__name:"index",setup(ve){const T=P(),n=v([]),s=v([]),h=v([]),b=v(),f=(t,a)=>{b.value=t,O(a).then(d=>{d.state==200?(h.value=d.data,console.log(h.value),g.value=!0):m.error(d.message)})},$=t=>new Promise((a,d)=>{setTimeout(()=>{var _=document.createElement("a");_.href="/local-resource/file/"+t,_.click(),_.remove(),a()},1e3)}),D=()=>{if(!r.value){m.warning("请选择下载内容");return}if(r.value.length<1){m.warning("请选择下载内容");return}console.log(r.value),r.value.forEach(t=>{const a=document.createElement("a");a.href="/local-resource/file/"+t.filename,a.download=t.originFilename,document.body.appendChild(a),a.click(),document.body.removeChild(a)}),m.success("已添至下载列表"),g.value=!1},r=v([]),F=t=>{r.value=t,console.log(r.value)},g=v(!1),H=()=>{r.value=[]};return G(async()=>{await L().then(t=>{t.state==200?n.value=t.data:m.error(t.message)}),await X().then(t=>{t.state==200?s.value=t.data:m.error(t.message)})}),(t,a)=>{const d=R,_=U,I=z,y=A,w=J,M=K,S=Q;return i(),u(k,null,[o("main",null,[l(q,{route:C(T)},null,8,["route"]),l(I,null,{default:c(()=>[o("div",Y,[(i(!0),u(k,null,x(n.value.length,e=>(i(),u("div",{key:n.value[e-1].id,class:"contents_item"},[l(_,{shadow:"hover",class:"resource_card","body-style":{padding:"0px"},onClick:p=>f(n.value[e-1].name,n.value[e-1].id)},{default:c(()=>[o("div",Z,[n.value[e-1].cover?(i(),u("img",{key:0,class:"card_img card_img_gray",src:"/local-resource/image/"+n.value[e-1].cover,alt:""},null,8,ee)):E("",!0),o("div",ae,[l(d,null,{default:c(()=>[l(C(B))]),_:1})])])]),_:2},1032,["onClick"]),o("div",te,[o("div",{class:"card_info_title",onClick:p=>f(n.value[e-1].name,n.value[e-1].id)},[o("span",{title:n.value[e-1].name},V(n.value[e-1].name),9,oe)],8,le)])]))),128))]),o("div",ne,[(i(!0),u(k,null,x(s.value.length,e=>(i(),u("div",{key:s.value[e-1].id,class:"contents_item"},[l(_,{shadow:"hover",class:"resource_card","body-style":{padding:"0px"},onClick:p=>f(s.value[e-1].name,s.value[e-1].id)},{default:c(()=>[o("div",se,[s.value[e-1].cover?(i(),u("img",{key:0,class:"card_img card_img_gray",src:"/local-resource/image/"+s.value[e-1].cover,alt:""},null,8,ce)):E("",!0),o("div",re,[l(d,null,{default:c(()=>[l(C(B))]),_:1})])])]),_:2},1032,["onClick"]),o("div",de,[o("div",{class:"card_info_title",onClick:p=>f(s.value[e-1].name,s.value[e-1].id)},[o("span",{title:s.value[e-1].name},V(s.value[e-1].name),9,ue)],8,ie)])]))),128))])]),_:1})]),l(S,{modelValue:g.value,"onUpdate:modelValue":a[1]||(a[1]=e=>g.value=e),title:b.value+"资源下载","before-close":H()},{footer:c(()=>[l(w,{type:"primary",onClick:a[0]||(a[0]=e=>D())},{default:c(()=>a[3]||(a[3]=[N(" 批量下载 ",-1)])),_:1,__:[3]})]),default:c(()=>[o("div",null,[l(M,{data:h.value,height:"40vh",onSelectionChange:F},{default:c(()=>[l(y,{type:"selection",width:"55"}),l(y,{prop:"originFilename",label:"资源"}),l(y,{align:"right"},{default:c(e=>[l(w,{link:"",onClick:p=>$(e.row.filename)},{default:c(()=>a[2]||(a[2]=[N(" 下载 ",-1)])),_:2,__:[2]},1032,["onClick"])]),_:1})]),_:1},8,["data"])])]),_:1},8,["modelValue","title","before-close"])],64)}}});const ge=W(_e,[["__scopeId","data-v-253b79fb"]]);export{ge as default};
