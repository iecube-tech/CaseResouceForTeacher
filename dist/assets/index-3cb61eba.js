import{d as G,u as D,b as i,m as M,s as O,a as c,c as m,g as l,w as s,f as R,az as U,q as $,i as d,t as g,F as x,j as b,n as q,x as A,$ as F,v as L,y as W,N as H,an as J,ao as K,O as Q,aq as X}from"./index-8f9ccc2f.js";/* empty css                */import{P as Y}from"./detail-3974838b.js";const Z={class:"student"},ee={style:{"text-align":"center"}},te={style:{"text-align":"center"}},ae={style:{height:"74px",overflow:"hidden"}},re=G({__name:"index",setup(le){const k=D().params.projectId,f=i(0),o=i([]),r=i([]),u=i(1),n=i(20),p=i(""),C=()=>{r.value=[];for(let e=0;e<o.value.length;e++)(o.value[e].studentName==p.value||o.value[e].studentId==p.value)&&r.value.push(o.value[e])},S=()=>{p.value="",r.value=o.value.slice((u.value-1)*n.value,(u.value-1)*n.value+n.value)},E=e=>{n.value=e,u.value=1,r.value=o.value.slice(u.value-1,n.value+u.value-1)},N=e=>{r.value=o.value.slice((u.value-1)*n.value,(u.value-1)*n.value+n.value)};i({averageGrade:null,numberOfCompleter:null,numberOfParticipant:null,personnelDistributions:[{taskNum:null,studentNum:null}],taskAverages:[{taskNum:null,averageGrade:null}],taskMedians:[{taskNum:null,medianGrade:null}],tagsCount:[{item:null,count:null}]}),M(async()=>{await Y(k).then(e=>{e.state==200?(o.value=e.data,r.value=o.value.slice((u.value-1)*n.value,(u.value-1)*n.value+n.value),f.value=o.value.length):O.error("获取数据异常;"+e.message)})});const z=e=>{for(let t=0;t<e.length;t++){if(e[t].taskStatus==0)return"wait";if(e[t].taskStatus==1)return"process";if(e[t].taskStatus>=2)return"finish"}},T=e=>e?e+"":"-";return(e,t)=>{const h=A,j=F,w=L,y=W,v=H,B=J,I=K,P=Q,V=X;return c(),m("div",Z,[l(y,{gutter:20,style:{"margin-top":"20px"}},{default:s(()=>[l(w,{span:20},{default:s(()=>[l(j,{modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=a=>p.value=a),clearable:!0,placeholder:" 输入学号或者姓名...",class:"input-with-select"},{append:s(()=>[l(h,{icon:R(U),type:"primary",onClick:t[0]||(t[0]=a=>C())},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1}),l(w,{span:4,style:{"text-align":"center"}},{default:s(()=>[l(h,{type:"primary",onClick:t[2]||(t[2]=a=>S())},{default:s(()=>t[5]||(t[5]=[$(" 重置搜索 ",-1)])),_:1,__:[5]})]),_:1})]),_:1}),l(P,{data:r.value,"default-sort":{prop:"studentId",order:"descending"},style:{"min-height":"65vh","margin-top":"30px"},stripe:"","header-cell-style":{fontWeight:"bold",textAlign:"center"},"row-style":{flexGrow:1}},{default:s(()=>[l(v,{label:"姓名/学号",width:"110"},{default:s(a=>[d("div",ee,[d("span",null,g(a.row.studentName),1),t[6]||(t[6]=d("br",null,null,-1)),d("span",null,g(a.row.studentId),1)])]),_:1}),l(v,{label:"实验状态"},{default:s(a=>[l(I,{"align-center":""},{default:s(()=>[(c(!0),m(x,null,b(a.row.studentTasks.length,_=>(c(),q(B,{title:T(a.row.studentTasks[_-1].taskGrade),status:z(a.row.studentTasks)},null,8,["title","status"]))),256))]),_:2},1024)]),_:1}),l(v,{label:"总分",width:"100"},{default:s(a=>[d("div",te,[d("span",null,g(a.row.studentGrade),1)])]),_:1}),l(v,{label:"个性化改进建议",width:"180"},{default:s(a=>[d("div",ae,g(a.row.suggestion[0]),1)]),_:1}),l(v,{type:"expand"},{default:s(a=>[(c(!0),m(x,null,b(a.row.suggestion,_=>(c(),m("div",null,g(_),1))),256))]),_:1})]),_:1},8,["data"]),l(y,{style:{"margin-top":"20px","text-align":"center",display:"flex","justify-content":"center","align-items":"center"}},{default:s(()=>[l(V,{"current-page":u.value,"onUpdate:currentPage":t[3]||(t[3]=a=>u.value=a),"page-size":n.value,"onUpdate:pageSize":t[4]||(t[4]=a=>n.value=a),"page-sizes":[10,20,40,60],small:!0,background:!0,layout:"total, sizes, prev, pager, next, jumper",total:f.value,onSizeChange:E,onCurrentChange:N},null,8,["current-page","page-size","total"])]),_:1})])}}});export{re as default};
