import{h as V,d as G,b as i,m as O,e as j,a as f,c as k,g as a,w as l,i as n,aE as q,F as z,j as J,t as K,f as x,b7 as Q,as as W,q as m,n as X,s as y,r as Y,x as Z,ap as ee,$ as te,a0 as oe,ad as le,a8 as ne,aJ as ae,aK as se,aL as ie,_ as de}from"./index-8f9ccc2f.js";import{G as ue}from"./getRootNodeList-a4187607.js";function re(p){return V({url:"/map/root/add",method:"POST",params:{name:p}})}function _e(p){return V({url:"/map/root/del/"+p,method:"DELETE"})}const me={class:"common-layout"},pe={class:"sidebar-groups"},ve=["onMouseenter","onMouseleave"],ce=["onClick"],fe=["title"],ge=["id"],ke={class:"more_filled_container"},ye=["onClick"],we={class:"dialog-footer"},Ee={class:"dialog-footer"},be=G({__name:"index",setup(p){const s=i(""),u=i(!1),C=()=>{if(s.value==""||s.value==null){y.warning("请输入名称");return}u.value=!1,re(s.value).then(t=>{t.state==200?(s.value="",v.value=t.data):y.error(t.message)})},r=i(!1),g=i(),M=t=>{g.value=t,r.value=!0},N=()=>{_e(g.value).then(t=>{t.state==200?v.value=t.data:y.error(t.message)}),r.value=!1,g.value=null},v=i([]),w=i(0),c=i([]),B=t=>{c.value.push(t)},R=t=>{let e=c.value.indexOf(t);e!==-1&&c.value.splice(e,1),E(t)},$=t=>{document.getElementById(t).style.display="flex"},E=t=>{setTimeout(()=>{c.value.includes(t)||(document.getElementById(t).style.display="none")},200)},D=t=>{w.value=t,Y.push({name:"MapDetail",params:{id:t}})},b=()=>{ue().then(t=>{t.state==200&&(v.value=t.data)})};return O(()=>{b()}),(t,e)=>{const d=Z,I=ee,L=te,S=oe,T=le,h=ne,A=ae,F=j("RouterView"),P=se,U=ie;return f(),k("div",me,[a(U,{style:{height:"100vh"}},{default:l(()=>[a(A,{width:"250px"},{default:l(()=>[n("div",pe,[e[7]||(e[7]=n("div",{class:"sidebar-top"},[n("a",{href:"/"},[n("div",{style:{height:"3em","line-height":"3em",padding:"0.5em 1em"}},[n("img",{src:q,alt:""})])])],-1)),(f(!0),k(z,null,J(v.value,(o,H)=>(f(),k("section",{class:"sidebar-group",key:H},[n("div",{class:"sidebar-group-title",onMouseenter:_=>$("rootNode"+o.id),onMouseleave:_=>E("rootNode"+o.id)},[n("div",{class:"sidebar-group-title-text",onClick:_=>D(o.id)},[n("p",{title:o.name},K(o.name),9,fe)],8,ce),n("div",{class:"sidebar-group-title-btn-div",id:"rootNode"+o.id},[a(I,{placement:"right",width:150,trigger:"click",onShow:_=>B("rootNode"+o.id),onHide:_=>R("rootNode"+o.id)},{reference:l(()=>[a(d,{class:"sidebar-group-title-btn",link:"",icon:x(Q)},null,8,["icon"])]),default:l(()=>[n("div",ke,[n("div",{class:"more_filled_item",onClick:_=>M(o.id)},[a(d,{link:"",icon:x(W),size:"large"},{default:l(()=>e[6]||(e[6]=[m("删除",-1)])),_:1,__:[6]},8,["icon"])],8,ye)])]),_:2},1032,["onShow","onHide"])],8,ge)],40,ve)]))),128))]),n("div",{class:"floating-button",onClick:e[0]||(e[0]=o=>u.value=!0)}," + "),a(h,{modelValue:u.value,"onUpdate:modelValue":e[3]||(e[3]=o=>u.value=o),title:"新建MAP",width:"500","align-center":""},{footer:l(()=>[n("div",we,[a(d,{link:"",onClick:e[2]||(e[2]=o=>u.value=!1)},{default:l(()=>e[8]||(e[8]=[m("取消",-1)])),_:1,__:[8]}),a(d,{type:"primary",link:"",onClick:C},{default:l(()=>e[9]||(e[9]=[m(" 确定 ",-1)])),_:1,__:[9]})])]),default:l(()=>[a(T,{model:s.value},{default:l(()=>[a(S,{label:"名称：","label-width":"80px"},{default:l(()=>[a(L,{modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=o=>s.value=o),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(h,{modelValue:r.value,"onUpdate:modelValue":e[5]||(e[5]=o=>r.value=o),title:"删除MAP?",width:"500","align-center":""},{footer:l(()=>[n("div",Ee,[a(d,{link:"",onClick:e[4]||(e[4]=o=>r.value=!1)},{default:l(()=>e[10]||(e[10]=[m("取消",-1)])),_:1,__:[10]}),a(d,{type:"danger",link:"",onClick:N},{default:l(()=>e[11]||(e[11]=[m(" 删除 ",-1)])),_:1,__:[11]})])]),default:l(()=>[e[12]||(e[12]=n("div",null,[n("p",null,"您正在删除一个MAP，删除后不可恢复，继续删除吗？")],-1))]),_:1,__:[12]},8,["modelValue"])]),_:1}),a(P,null,{default:l(()=>[(f(),X(F,{key:w.value,onUpdateRootNode:b}))]),_:1})]),_:1})])}}});const Ve=de(be,[["__scopeId","data-v-1a57cffe"]]);export{Ve as default};
