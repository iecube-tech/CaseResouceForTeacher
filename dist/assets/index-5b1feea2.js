import{h as Ce,d as Q,b as c,S as de,m as H,e as pe,a as u,c as b,g as e,w as o,i as C,n as $,F as B,j as M,q as T,t as J,s as g,G as ce,$ as me,a0 as ve,P as te,af as oe,a2 as _e,a3 as fe,a5 as he,a6 as Se,ad as ge,x as W,y as K,_ as X,k as A,f as O,as as le,aP as ne,N as ye,au as ae,O as xe,ae as we,E as be,U as Ie,aA as Te,aj as $e,u as Ne,r as Ve,an as Le,ao as Pe,v as De}from"./index-8f9ccc2f.js";/* empty css                */import{d as Ee,G as Ue,c as Fe,b as Re}from"./updateTaskTemplate-f6a23dc4.js";import{a as Ge,A as qe,D as ze}from"./deleteCourseDesign-d8ec59d6.js";import{G as Ae}from"./getAllCourse-e5fc59da.js";import{C as Be}from"./courseDesign-baa6b6b5.js";import{U as ke,_ as Me}from"./mdExperimentalDesign.vue_vue_type_script_setup_true_lang-64b870ac.js";import{c as Oe}from"./getTaskTemplates-4d34e142.js";import{G as je,a as Je,D as se,b as ue,C as Qe,U as He}from"./getCourseNode-d7834a6f.js";import{D as re}from"./deleteVidoeById-b31f1c9d.js";import{G as ie}from"./getRootNodeList-a4187607.js";import{G as Ke}from"./getCaseVideo-a934e415.js";import"./index-9020ea85.js";function We(F){return Ce({url:"/emd_content/create",method:"POST",data:F})}const Xe={id:"pane-first",class:"pane",key:"0"},Ye={class:"cover-upload"},Ze=["src"],et=Q({__name:"one",props:{courseId:Number},emits:["nextStep","created"],setup(F,{emit:N}){const P=F,m=c(),s=c(),d=c({id:null,name:"",introduction:"",introduce:"",target:"",cover:"",completion:null,guidance:"",third:1,deviceId:null,emdCourse:null}),k=c([]),y=c([]),h=c({"x-access-token":localStorage.getItem("x-access-token"),"x-access-type":localStorage.getItem("x-access-type")}),E=de({name:[{required:!0,message:"请输入课程名称",trigger:"blur"}],introduction:[{required:!0,message:"请输入课程简介",trigger:"blur"}],introduce:[{required:!0,message:"请输入课程详细介绍",trigger:"blur"}],cover:[{required:!0,message:"请上传封面",trigger:"blur"}],emdCourse:[{required:!0,message:"请选择课程指导书",trigger:"blur"}]}),r=l=>{l.validate((t,i)=>{t?(d.value.id=m.value,We(Object.assign({},d.value)).then(n=>{n.state==200?(d.value=n.data,m.value=n.data.id,p(n.data),_(d.value.completion)):g.error(n.message)})):g.error})},R=N,_=l=>{R("nextStep",l)},p=l=>{R("created",l)},v=l=>{l!=null&&ce(l).then(t=>{t.state==200?d.value=t.data:g.error(t.message)})},V=()=>{Ae().then(l=>{l.state==200&&(y.value=l.data)})},U=()=>{Ge().then(l=>{l.state==200?k.value=l.data:g.error("获取iecube设备列表异常")})},G=(l,t)=>{l.state==200&&(d.value.cover=l.data.filename)},f=l=>{if(!(l.type=="image/jpeg"||l.type=="image/png"||l.type=="image/gif"))g.error("支持 JPG，PNG， GIF！");else if(l.size/1024/1024>5)return g.error("图片不要大于 2MB!"),!1;return!0};return H(()=>{m.value=P.courseId,v(m.value),V(),U()}),(l,t)=>{const i=me,n=ve,a=pe("Plus"),S=te,L=oe,D=_e,z=fe,w=he,q=Se,Y=ge,Z=W,ee=K;return u(),b("div",Xe,[e(Y,{ref_key:"contentFormRef",ref:s,model:d.value,rules:E,"label-width":"120px",class:"contentForm"},{default:o(()=>[e(n,{label:"课程名称",prop:"name"},{default:o(()=>[e(i,{modelValue:d.value.name,"onUpdate:modelValue":t[0]||(t[0]=I=>d.value.name=I)},null,8,["modelValue"])]),_:1}),e(n,{label:"课程简介",prop:"introduction"},{default:o(()=>[e(i,{type:"textarea",autosize:{minRows:2,maxRows:4},modelValue:d.value.introduction,"onUpdate:modelValue":t[1]||(t[1]=I=>d.value.introduction=I)},null,8,["modelValue"])]),_:1}),e(n,{label:"课程详细介绍",prop:"introduce"},{default:o(()=>[e(i,{type:"textarea",autosize:{minRows:2,maxRows:4},modelValue:d.value.introduce,"onUpdate:modelValue":t[2]||(t[2]=I=>d.value.introduce=I)},null,8,["modelValue"])]),_:1}),e(n,{label:"封面",prop:"cover"},{default:o(()=>[C("div",Ye,[e(L,{class:"cover-uploader",action:"/dev-api/files/e/image","show-file-list":!1,headers:h.value,"on-success":G,"before-upload":f},{default:o(()=>[d.value.cover?(u(),b("img",{key:0,src:"/local-resource/image/"+d.value.cover,class:"cover"},null,8,Ze)):(u(),$(S,{key:1,class:"cover-uploader-icon"},{default:o(()=>[e(a)]),_:1}))]),_:1},8,["headers"])])]),_:1}),e(n,{label:"指导书",prop:"emdCourse"},{default:o(()=>[e(z,{modelValue:d.value.emdCourse,"onUpdate:modelValue":t[3]||(t[3]=I=>d.value.emdCourse=I),placeholder:"选择课程",style:{width:"240px"}},{default:o(()=>[(u(!0),b(B,null,M(y.value,(I,x)=>(u(),$(D,{key:x,label:I.name,value:I.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(n,{label:"实验设备",prop:"deviceId"},{default:o(()=>[e(q,{modelValue:d.value.deviceId,"onUpdate:modelValue":t[4]||(t[4]=I=>d.value.deviceId=I)},{default:o(()=>[e(w,{label:0},{default:o(()=>t[6]||(t[6]=[T("无设备",-1)])),_:1,__:[6]}),(u(!0),b(B,null,M(k.value,I=>(u(),$(w,{label:I.id},{default:o(()=>[T(J(I.name),1)]),_:2},1032,["label"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),e(ee,{class:"bottom-row"},{default:o(()=>[e(Z,{type:"primary",onClick:t[5]||(t[5]=I=>r(s.value))},{default:o(()=>t[7]||(t[7]=[T("下一步",-1)])),_:1,__:[7]})]),_:1})])}}});const tt=X(et,[["__scopeId","data-v-e7476a05"]]),ot={id:"pane-fourth",class:"pane",key:"3"},lt={style:{margin:"30px 0px"}},at={key:0},nt={key:0},st={style:{margin:"30px 0px"}},ut={key:0},rt={key:0},it=Q({__name:"two",props:{courseId:Number},emits:["nextStep","lastStep"],setup(F,{emit:N}){const P=F;H(()=>{k.value=P.courseId,h()});const m=N,s=n=>{m("nextStep",n)},d=()=>{m("lastStep")},k=c(0),y=c([]),h=()=>{Be(k.value).then(n=>{n.state==200?y.value=n.data:g.error("获取课程设计内容异常")})},E=c(),r=c({id:null,graduationRequirementName:"",graduationPointList:[],courseTargetList:[]}),R=de({graduationRequirementName:[{required:!0,message:"请输入毕业要求",trigger:"blur"}],graduationPointList:[{required:!0,validator:function(n,a,S){a[0].point==""?S(new Error("没有对应的毕业要求指标点")):S()},trigger:"change"}],courseTargetList:[{required:!0,validator:function(n,a,S){a[0].point==""?S(new Error("没有对应的课程目标")):S()},trigger:"change"}]}),_=c(""),p=c("");c("");const v=()=>{if(_.value=="")return;let n=c({id:null,parentId:null,name:_.value});r.value.graduationPointList.push(n.value),_.value=""},V=n=>{r.value.graduationPointList.splice(n,1)},U=()=>{if(p.value=="")return;let n=c({id:null,parentId:null,name:p.value});r.value.courseTargetList.push(n.value),p.value=""},G=n=>{r.value.courseTargetList.splice(n,1)},f=async n=>{n&&await n.validate((a,S)=>{if(a){let L=Object.assign({},r.value);qe(k.value,L).then(D=>{D.state==200?(y.value=D.data,l()):g.error(D.message)})}})},l=()=>{r.value.graduationRequirementName="",r.value.graduationPointList.splice(0,r.value.graduationPointList.length),r.value.courseTargetList.splice(0,r.value.courseTargetList.length)},t=n=>{ze(k.value,n).then(a=>{a.state==200?y.value=a.data:g.error(a.message)})},i=()=>{ke(k.value,1).then(n=>{if(n.state==200){let a=n.data.completion;s(a)}else g.error(n.message)})};return(n,a)=>{const S=ye,L=W,D=ae,z=xe,w=me,q=ve,Y=we,Z=ge,ee=be,I=K;return u(),b("div",ot,[a[13]||(a[13]=C("div",{style:{margin:"20px 0px"}},[C("span",null," 本节需要明确课程目标和对应知识点的匹配关系 ")],-1)),C("div",lt,[e(z,{data:y.value,border:!0,style:{width:"100%"}},{default:o(()=>[e(S,{prop:"graduationRequirementName",label:"毕业要求"}),e(S,{label:"毕业要求指标点"},{default:o(x=>[y.value.length>0&&y.value[0]!=null?(u(),b("div",at,[(u(!0),b(B,null,M(x.row.graduationPointList.length,j=>(u(),b("li",null,J(x.row.graduationPointList[j-1].name),1))),256))])):A("",!0)]),_:1}),e(S,{label:"对应的课程目标"},{default:o(x=>[y.value.length>0&&y.value[0]!=null?(u(),b("div",nt,[(u(!0),b(B,null,M(x.row.courseTargetList.length,j=>(u(),b("li",null,J(x.row.courseTargetList[j-1].name),1))),256))])):A("",!0)]),_:1}),e(S,{prop:"",label:"操作",width:"100px"},{default:o(x=>[e(D,{title:"确定删除吗?",onConfirm:j=>t(x.row.graduationRequirementId)},{reference:o(()=>[e(L,{link:"",type:"danger",size:"small",icon:O(le)},null,8,["icon"])]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])]),C("div",st,[e(ee,{style:{"min-height":"280px"},shadow:"never"},{header:o(()=>a[8]||(a[8]=[C("div",null,[C("span",null,"添加课程目标和对应知识点匹配关系")],-1)])),default:o(()=>[C("div",null,[e(Z,{"label-width":"160px",ref_key:"designFormRef",ref:E,model:r.value,rules:R},{default:o(()=>[e(q,{label:"毕业要求：",prop:"graduationRequirementName"},{default:o(()=>[e(w,{modelValue:r.value.graduationRequirementName,"onUpdate:modelValue":a[0]||(a[0]=x=>r.value.graduationRequirementName=x),style:{"max-width":"500px"},placeholder:"请输入毕业要求"},null,8,["modelValue"])]),_:1}),e(q,{label:"毕业要求指标点：",prop:"graduationPointList"},{default:o(()=>[r.value.graduationPointList.length>0?(u(),b("div",ut,[(u(!0),b(B,null,M(r.value.graduationPointList.length,x=>(u(),$(Y,{key:x,class:"mx-1",closable:"",onClose:j=>V(x-1)},{default:o(()=>[T(J(r.value.graduationPointList[x-1].name),1)]),_:2},1032,["onClose"]))),128))])):A("",!0)]),_:1}),e(q,null,{default:o(()=>[e(w,{style:{"max-width":"500px","margin-right":"20px"},modelValue:_.value,"onUpdate:modelValue":a[1]||(a[1]=x=>_.value=x),placeholder:"请分条输入毕业要求对应指标点，每一条完成后点击右侧保存"},null,8,["modelValue"]),e(L,{type:"primary",circle:"",size:"small",icon:O(ne),onClick:a[2]||(a[2]=x=>v())},null,8,["icon"])]),_:1}),e(q,{label:"对应课程目标：",prop:"graduationPointList"},{default:o(()=>[r.value.courseTargetList.length>0?(u(),b("div",rt,[(u(!0),b(B,null,M(r.value.courseTargetList.length,x=>(u(),$(Y,{key:x,class:"mx-1",closable:"",onClose:j=>G(x-1)},{default:o(()=>[T(J(r.value.courseTargetList[x-1].name),1)]),_:2},1032,["onClose"]))),128))])):A("",!0)]),_:1}),e(q,null,{default:o(()=>[e(w,{style:{"max-width":"500px","margin-right":"20px"},modelValue:p.value,"onUpdate:modelValue":a[3]||(a[3]=x=>p.value=x),placeholder:"请分条输入毕业要求对应课程目标，每一条完成后点击右侧保存"},null,8,["modelValue"]),e(L,{type:"primary",circle:"",size:"small",icon:O(ne),onClick:a[4]||(a[4]=x=>U())},null,8,["icon"])]),_:1}),e(q,null,{default:o(()=>[e(L,{type:"primary",size:"small",onClick:a[5]||(a[5]=x=>f(E.value))},{default:o(()=>a[9]||(a[9]=[T("添加",-1)])),_:1,__:[9]}),e(L,{size:"small",onClick:a[6]||(a[6]=x=>l())},{default:o(()=>a[10]||(a[10]=[T("清除内容",-1)])),_:1,__:[10]})]),_:1})]),_:1},8,["model","rules"])])]),_:1})]),e(I,{class:"bottom-row"},{default:o(()=>[e(L,{onClick:d},{default:o(()=>a[11]||(a[11]=[T("上一步",-1)])),_:1,__:[11]}),e(L,{type:"primary",onClick:a[7]||(a[7]=x=>i())},{default:o(()=>a[12]||(a[12]=[T("下一步",-1)])),_:1,__:[12]})]),_:1})])}}});const dt=X(it,[["__scopeId","data-v-ef15328d"]]),pt={id:"pane-fiveth",class:"pane",key:"4"},ct={style:{margin:"30px 0px"}},mt={style:{margin:"30px 0px"}},vt={key:0},_t={key:1},ft=Q({__name:"three",props:{courseId:Number,course:Object},emits:["nextStep","lastStep"],setup(F,{emit:N}){const P=F,m=c(0),s=c(),d=c(0);H(()=>{m.value=P.courseId,s.value=P.course,k(m.value)});const k=f=>{Oe(f).then(l=>{l.state==200?(r.value=l.data,r.value.length>0&&(d.value=r.value[r.value.length-1].num)):g.error("获取课程实验列表异常")})},y=N,h=f=>{y("nextStep",f)},E=()=>{y("lastStep")},r=c([]),R=f=>{r.value=f,r.value.length>0&&(d.value=r.value[r.value.length-1].num)},_=()=>{V.value=!1},p=f=>{Ee(m.value,f).then(l=>{l.state==200?r.value=l.data:g.error(l.message)})},v=()=>{r.value.length<1&&g.warning("请完成实验设计"),ke(m.value,2).then(f=>{if(f.state==200){let l=f.data.completion;h(l)}else g.error(f.message)})},V=c(!1),U=c(),G=f=>{console.log(r.value[f]),U.value=JSON.parse(JSON.stringify(r.value[f])),V.value=!0};return(f,l)=>{const t=ye,i=W,n=ae,a=xe,S=be,L=K;return u(),b("div",pt,[l[5]||(l[5]=C("div",{style:{margin:"30px 0px"}},[C("span",null,"本节需要完善该课程的实验模版")],-1)),C("div",ct,[e(a,{data:r.value,border:!0,style:{width:"100%"}},{default:o(()=>[e(t,{prop:"num",label:"实验序号",width:"60px"}),e(t,{prop:"taskName",label:"实验名称"}),e(t,{prop:"labProc.name",label:"实验指导书"}),e(t,{prop:"weighting",label:"实验权重"}),e(t,{prop:"classHour",label:"实验课时"}),e(t,{prop:"",label:"操作",width:"100px"},{default:o(D=>[e(i,{link:"",type:"primary",size:"small",icon:O(Ie),onClick:z=>G(D.$index)},null,8,["icon","onClick"]),e(n,{title:"确定删除吗?",onConfirm:z=>p(D.row.id)},{reference:o(()=>[e(i,{link:"",type:"danger",size:"small",icon:O(le)},null,8,["icon"])]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])]),C("div",mt,[e(S,{style:{"min-height":"280px"},shadow:"never"},{header:o(()=>[V.value?(u(),b("div",_t,l[2]||(l[2]=[C("span",null,"编辑实验",-1)]))):(u(),b("div",vt,l[1]||(l[1]=[C("span",null,"添加实验",-1)])))]),default:o(()=>[(u(),$(Me,{key:Date.now().toString(),course:s.value,isEdit:V.value,oldTaskTemplate:U.value,lastTaskNum:d.value,onAddSuccess:R,onExitUpdate:_},null,8,["course","isEdit","oldTaskTemplate","lastTaskNum"]))]),_:1})]),e(L,{class:"bottom-row"},{default:o(()=>[e(i,{onClick:E},{default:o(()=>l[3]||(l[3]=[T("上一步",-1)])),_:1,__:[3]}),e(i,{type:"primary",onClick:l[0]||(l[0]=D=>v())},{default:o(()=>l[4]||(l[4]=[T("下一步",-1)])),_:1,__:[4]})]),_:1})])}}});const gt=X(ft,[["__scopeId","data-v-b235b916"]]),yt={key:0},xt={class:"cover-upload"},bt=["src"],kt={key:1,style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},Ct={key:2,style:{"margin-top":"2em"}},ht=Q({__name:"four",props:{course:Object},emits:["nextStep","lastStep"],setup(F,{emit:N}){const P=F,m=c(),s=c(),d=c();c();const k=c([]),y=c({nodeId:null,caseId:m.value}),h=c({"x-access-token":localStorage.getItem("x-access-token"),"x-access-type":localStorage.getItem("x-access-type")}),E=()=>{Je(m.value,s.value.fourthType).then(t=>{t.state!=200&&g.error("更新展示方式出错了")}),s.value.fourthType==="video"&&(s.value.fourth&&se(s.value.fourth),y.value.nodeId=null,V()),s.value.fourthType==="image"&&(d.value&&re(d.value.id),y.value.nodeId=null),s.value.fourthType==="map"&&(d.value&&re(d.value.id),s.value.fourth&&se(s.value.fourth),ie().then(t=>{t.state==200&&(k.value=t.data)})),s.value.fourth=null},r=t=>t.type!="image/png"?(g.error("请上传PNG类型的图片"),!1):t.size/1024/1024>2?(g.error("图片最大2MB!"),!1):!0,R=(t,i)=>{t.state==200&&(s.value.fourth=t.data.filename)},_=t=>t.type!="video/mp4"?(g.error("请上传MP4类型的视频"),!1):t.size/1024/1024>2048?(g.error("视频最大2G!"),!1):!0,p=(t,i)=>{t.state==200&&(v.value=t.data)},v=c([]),V=()=>{Ke(m.value).then(t=>{t.state==200?v.value=t.data:g.error(t.message)})};H(()=>{s.value=P.course,m.value=P.course.id,s.value.fourthType==="video"&&V(),s.value.fourthType==="map"&&(ie().then(t=>{t.state==200&&(k.value=t.data)}),je(m.value).then(t=>{t.state==200&&(y.value=t.data)}))});const U=N,G=t=>{U("nextStep",t)},f=()=>{U("lastStep")},l=async()=>{if((s.value.fourthType==="video"||s.value.fourthType==="image")&&await ue(m.value,s.value.fourth).then(t=>{if(t.state!=200){g.error(t.message);return}}),s.value.fourthType==="map")if(await ue(m.value,null).then(t=>{if(t.state!=200){g.error(t.message);return}}),y.value.nodeId!=null)await Qe(m.value,y.value.nodeId).then(t=>{if(t.state!=200){g.error(t.message);return}});else{g.error("请选择映射图");return}await He(m.value,3).then(t=>{if(t.state==200){let i=t.data.completion;G(i)}else g.error(t.message)})};return(t,i)=>{const n=_e,a=fe,S=K,L=te,D=oe,z=W;return u(),b("div",null,[e(S,null,{default:o(()=>[e(a,{modelValue:s.value.fourthType,"onUpdate:modelValue":i[0]||(i[0]=w=>s.value.fourthType=w),placeholder:"选择展示方式",style:{width:"240px"},onChange:i[1]||(i[1]=w=>E())},{default:o(()=>[(u(),$(n,{key:"image",label:"图片",value:"image"})),(u(),$(n,{key:"video",label:"视频",value:"video"})),(u(),$(n,{key:"map",label:"映射关系",value:"map"}))]),_:1},8,["modelValue"])]),_:1}),s.value.fourthType==="image"?(u(),b("div",yt,[C("div",xt,[e(D,{class:"cover-uploader",action:"/dev-api/files/upimage/",headers:h.value,"show-file-list":!1,"on-success":R,"before-upload":r},{default:o(()=>[s.value.fourth?(u(),b("img",{key:0,src:"/local-resource/image/"+s.value.fourth,class:"cover"},null,8,bt)):(u(),$(L,{key:1,class:"cover-uploader-icon"},{default:o(()=>[e(O(Te))]),_:1}))]),_:1},8,["headers"])])])):s.value.fourthType==="video"?(u(),b("div",kt,[e(D,{"file-list":v.value,"onUpdate:fileList":i[2]||(i[2]=w=>v.value=w),class:"upload-demo",headers:h.value,action:"/dev-api/video/n/up/"+m.value,"on-success":p,"before-upload":_},{tip:o(()=>i[7]||(i[7]=[C("div",{class:"el-upload__tip"}," 视频最大1GB ",-1)])),default:o(()=>[e(z,{type:"primary",style:{width:"200px"}},{default:o(()=>i[6]||(i[6]=[T("上传",-1)])),_:1,__:[6]})]),_:1},8,["file-list","headers","action"])])):(u(),b("div",Ct,[e(a,{modelValue:y.value.nodeId,"onUpdate:modelValue":i[3]||(i[3]=w=>y.value.nodeId=w),placeholder:"选择映射关系",style:{width:"240px"},onChange:i[4]||(i[4]=w=>E())},{default:o(()=>[(u(!0),b(B,null,M(k.value,(w,q)=>(u(),$(n,{key:"node"+q,label:w.name,value:w.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])),e(S,{class:"bottom-row"},{default:o(()=>[e(z,{onClick:f},{default:o(()=>i[8]||(i[8]=[T("上一步",-1)])),_:1,__:[8]}),e(z,{type:"primary",onClick:i[5]||(i[5]=w=>l())},{default:o(()=>i[9]||(i[9]=[T("下一步",-1)])),_:1,__:[9]})]),_:1})])}}});const St=X(ht,[["__scopeId","data-v-f789b8df"]]),wt={id:"pane-seventh",class:"pane",key:"6"},It={style:{display:"flex","flex-direction":"column"}},Tt={style:{padding:"20px"}},$t=Q({__name:"five",props:{courseId:Number},emits:["done","lastStep"],setup(F,{emit:N}){const P=F,m=N,s=()=>{m("done")},d=()=>{m("lastStep")},k=c(0);H(()=>{k.value=P.courseId,R(k.value)});const y=c({"x-access-token":localStorage.getItem("x-access-token"),"x-access-type":localStorage.getItem("x-access-type")}),h=c([]),E=p=>p.size/1024/1024/1024>1?(g({showClose:!0,message:"文件最大不能超过1GB",type:"success"}),!1):!0,r=p=>{p.state==200&&(h.value=p.data)},R=async p=>{await Ue(p).then(v=>{v.state==200?h.value=v.data:g.error("获取资源包失败"+v.message)})},_=p=>{Fe(k.value,p).then(v=>{v.state==200?h.value=v.data:g.error(v.message)})};return(p,v)=>{const V=pe("upload-filled"),U=te,G=oe,f=W,l=ae,t=K;return u(),b("div",wt,[C("div",It,[C("div",Tt,[e(G,{class:"upload-demo",drag:"",multiple:"",action:"/dev-api/content/upload_pkg/"+k.value,headers:y.value,"before-upload":E,"on-success":r},{tip:o(()=>v[0]||(v[0]=[C("div",{class:"el-upload__tip"}," 单个文件最大不超过100MB。 ",-1)])),default:o(()=>[e(U,{class:"el-icon--upload"},{default:o(()=>[e(V)]),_:1}),v[1]||(v[1]=C("div",{class:"el-upload__text"},[T(" Drop file here or "),C("em",null,"click to upload")],-1))]),_:1,__:[1]},8,["action","headers"])]),C("div",null,[(u(!0),b(B,null,M(h.value.length,i=>(u(),$(t,{style:{"text-align":"left"}},{default:o(()=>[e(f,{type:"primary",icon:O($e),link:""},{default:o(()=>[T(J(h.value[i-1].originFilename),1)]),_:2},1032,["icon"]),e(l,{title:"确定删除吗?",onConfirm:n=>_(h.value[i-1].id)},{reference:o(()=>[e(f,{link:"",type:"danger",size:"small",icon:O(le)},null,8,["icon"])]),_:2},1032,["onConfirm"])]),_:2},1024))),256))])]),e(t,{class:"bottom-row"},{default:o(()=>[e(f,{onClick:d},{default:o(()=>v[2]||(v[2]=[T("上一步",-1)])),_:1,__:[2]}),e(f,{type:"primary",onClick:s},{default:o(()=>v[3]||(v[3]=[T("完成",-1)])),_:1,__:[3]})]),_:1})])}}});const Nt=X($t,[["__scopeId","data-v-ead56cc2"]]),Vt={style:{"margin-top":"40px"}},Ot=Q({__name:"index",setup(F){const N=c({id:null,name:"",introduction:"",introduce:"",target:"",cover:"",completion:null,guidance:"",third:1,deviceId:null,mdCourse:null}),P=Ne(),m=c(0),s=c(0),d=c(0),k=_=>{_>d.value+1||(s.value=_)},y=_=>{s.value=_+1,_>d.value&&(d.value=_)},h=()=>{s.value-=1},E=_=>{console.log(_),m.value=_.id,N.value=_},r=_=>{_&&ce(_).then(p=>{p.state==200?(N.value=p.data,s.value=N.value.completion+1,d.value=N.value.completion):g.error(p.message)})},R=()=>{Re(m.value).then(_=>{_.state==200?Ve.push({name:P.meta.parentName}):g.error(_.message)})};return H(()=>{m.value=P.params.courseId,r(m.value)}),(_,p)=>{const v=Le,V=Pe,U=De,G=K;return u(),b("div",null,[e(G,null,{default:o(()=>[e(U,{span:24},{default:o(()=>[e(V,{active:s.value,simple:""},{default:o(()=>[e(v,{title:"基本信息",onClick:p[0]||(p[0]=f=>k(0))}),e(v,{title:"课程设计",onClick:p[1]||(p[1]=f=>k(1))}),e(v,{title:"实验设计",onClick:p[2]||(p[2]=f=>k(2))}),e(v,{title:"理实映射",onClick:p[3]||(p[3]=f=>k(3))}),e(v,{title:"附件资源",onClick:p[4]||(p[4]=f=>k(4))})]),_:1},8,["active"])]),_:1})]),_:1}),C("div",Vt,[s.value==0?(u(),$(tt,{key:0,courseId:m.value,onNextStep:y,onCreated:E},null,8,["courseId"])):A("",!0),s.value==1?(u(),$(dt,{key:1,courseId:m.value,onLastStep:h,onNextStep:y},null,8,["courseId"])):A("",!0),s.value==2?(u(),$(gt,{key:2,courseId:m.value,course:N.value,onLastStep:h,onNextStep:y},null,8,["courseId","course"])):A("",!0),s.value==3?(u(),$(St,{key:3,course:N.value,onLastStep:h,onNextStep:y},null,8,["course"])):A("",!0),s.value==4?(u(),$(Nt,{key:4,courseId:m.value,onLastStep:h,onDone:R},null,8,["courseId"])):A("",!0)])])}}});export{Ot as default};
