import{h as E,d as Ul,u as Ml,b as p,S as ie,m as Le,s as d,aM as zl,o as Ve,aN as Ol,aO as Il,e as Al,a as u,c as v,g as t,w as n,i as o,H as j,n as q,q as m,k as z,f as x,aA as fe,F as w,j as h,t as L,U as Re,as as re,aP as ae,aj as Gl,aQ as Bl,aR as jl,r as Jl,G as Hl,aS as Kl,A as Ql,an as Wl,ao as Xl,v as Yl,y as Zl,$ as et,a0 as lt,ad as tt,x as at,P as nt,af as ot,E as ut,ae as st,a9 as it,a8 as rt,N as dt,au as mt,O as vt,a7 as pt,_ as ft}from"./index-8f9ccc2f.js";/* empty css                */import{T as gt,E as ct,U as _t,c as kt,u as yt,a as bt,b as Ct}from"./updateContent-99cb4197.js";import{a as xt,d as wt,u as ht,G as Lt,c as Vt,b as Rt}from"./updateTaskTemplate-f6a23dc4.js";import{c as Tt}from"./getTaskTemplates-4d34e142.js";import{D as Dt}from"./deleteVidoeById-b31f1c9d.js";function qt(_){return E({url:"/content/add",method:"POST",data:_})}function Et(){return E({url:"/points/all_module_tem",method:"GET"})}function $t(_){return E({url:"/points/modules_of_case/"+_,method:"GET"})}function Ft(_){return E({url:"/content/update_points/"+_,method:"POST"})}function Nt(_,V){return E({url:"/design/add_design/"+_,method:"POST",data:V})}function Pt(_,V){return E({url:"/design/delete/"+_,method:"POST",params:{caseTargetId:V}})}function St(){return E({url:"/points/all_concept_tem",method:"GET"})}function Ut(_){return E({url:"/points/add_concept_tem",method:"POST",data:_})}function Mt(_){return E({url:"/points/del_concept_tem",method:"DELETE",params:{id:_}})}function zt(_){return E({url:"/points/add_module_tem",method:"POST",data:_})}function Ot(_){return E({url:"/points/del_module_tem",method:"DELETE",params:{id:_}})}function It(_,V){return E({url:"/points/case_add_module",method:"POST",params:{caseId:_,moduleTempId:V}})}function At(_,V){return E({url:"/points/case_del_module",method:"DELETE",params:{caseId:_,moduleId:V}})}function Gt(_,V){return E({url:"/points/module_update",method:"POST",params:{caseId:V,caseId:V},data:_})}const Bt={style:{"margin-top":"20px","margin-bottom":"20px",padding:"0px 20px"}},jt=["aria-hidden"],Jt=["aria-hidden"],Ht={class:"cover-upload"},Kt=["src"],Qt=["aria-hidden"],Wt={key:0,class:"card-list",style:{"min-height":"260px"}},Xt={class:"card-header"},Yt={class:"all-modules"},Zt={class:"card-list"},ea={style:{display:"flex","flex-direction":"row","flex-wrap":"wrap"}},la={class:"dialog-footer"},ta={class:"dialog-footer"},aa=["aria-hidden"],na={style:{margin:"30px 0px"}},oa={key:0},ua={style:{margin:"30px 0px"}},sa={key:0},ia=["aria-hidden"],ra={style:{margin:"30px 0px"}},da={style:{display:"flex","justify-content":"center"}},ma={style:{margin:"30px 0px"}},va={key:0},pa={key:1},fa={key:0},ga={key:0},ca={key:0},_a={key:0},ka={style:{"margin-left":"400px"}},ya=["aria-hidden"],ba={style:{border:"1px solid #ccc"}},Ca=["aria-hidden"],xa={style:{display:"flex","flex-direction":"column"}},wa={style:{display:"flex","flex-direction":"column","margin-top":"20px"}},ha={style:{padding:"20px"}},La=Ul({__name:"index",setup(_){const V=Ml(),f=p(0),R=p(0),ge=p(),c=p({id:null,name:"",introduction:"",introduce:"",target:"",cover:"",completion:null,guidance:"",third:0}),P=p([{id:null,name:null,children:[{id:null,name:null}]}]),ne=p({"x-access-token":localStorage.getItem("x-access-token"),"x-access-type":localStorage.getItem("x-access-type")}),Te=ie({name:[{required:!0,message:"请输入案例名称",trigger:"blur"}],introduction:[{required:!0,message:"请输入案例简介",trigger:"blur"}]}),De=l=>{l&&l.validate((e,g)=>{if(e)f.value==0?qt(Object.assign({},c.value)).then(b=>{b.state==200?(f.value=b.data,c.value.id=b.data,R.value++):d.error(b.message)}):(c.value.id=f.value,_t(Object.assign({},c.value)).then(b=>{b.state==200?(c.value=b.data,R.value++):d.error(b.message)}));else return})},qe=(l,e)=>{l.state==200&&(c.value.cover=l.data.filename)},Ee=l=>{if(f.value==0&&d.error("请先完成上一步"),l.type=="image/jpeg"||l.type=="image/png"||l.type=="image/gif"){if(l.size/1024/1024>2)return d.error("图片不要大于 2MB!"),!1}else return d.error("支持 JPG，PNG， GIF！"),!1;return!0},$e=()=>{if(c.value.cover==""){d.error("请先上传图片");return}kt(f.value,1).then(l=>{l.state==200?(c.value=l.data,R.value++):d.error(l.message)})},T=p([]),Fe=l=>{let e="基础知识：";for(let g=0;g<P.value[l].children.length;g++)e=e+P.value[l].children[g].name+"；";return e},Ne=l=>{It(f.value,l).then(e=>{e.state==200?T.value=e.data:d.error(e.message)})},Pe=l=>{At(f.value,l).then(e=>{e.state==200?T.value=e.data:d.error(e.message)})},Se=()=>{Ft(f.value).then(l=>{l.state==200?(c.value==l.data,R.value++):d.error(l.message)})},Ue=l=>{let e=JSON.parse(JSON.stringify(T.value[l]));k.value.id=e.id,k.value.name=e.name,k.value.children=e.children,O.value=!0},O=p(!1),Me=()=>{k.value.id=null,k.value.name="",k.value.children=[]},I=p(!1),k=p({id:null,name:"",children:[]}),X=p({id:null,name:""}),J=p([]),ze=l=>{k.value.children.splice(l,1)},Oe=l=>{if(k.value.children.length>=4){d.warning("最多添加4个知识点");return}for(let e=0;e<k.value.children.length;e++)if(k.value.children[e].id==J.value[l].id)return;k.value.children.push(J.value[l])},Ie=()=>{k.value.name==""||k.value.children.length<1||(k.value.id!=null?Gt(k.value,f.value).then(l=>{l.state==200?(T.value=l.data,k.value.id=null,k.value.name="",k.value.children=[],O.value=!1,I.value=!1):d.error("操作失败 "+l.message)}):zt(k.value).then(l=>{l.state==200?(P.value=l.data,k.value.name="",k.value.children=[],O.value=!1,I.value=!1):d.error("操作失败 "+l.message)}))},Ae=l=>{Ot(l).then(e=>{e.state==200?P.value=e.data:d.error("操作失败 "+e.message)})},Ge=()=>{X.value.name!=""&&Ut(X.value).then(l=>{l.state==200?(J.value=l.data,X.value.name="",I.value=!1):d.error("添加失败 "+l.message)})},Be=l=>{l&&Mt(l).then(e=>{e.state==200?J.value=e.data:d.error("操作失败,"+e.message)})};Le(()=>{St().then(l=>{l.state==200?J.value=l.data:d.error("获取数据失败 "+l.message)})});const ce=p(),C=p({id:null,targetName:"",knowledgePoints:[{id:null,targetId:null,point:""}]}),A=p(""),je=ie({targetName:[{required:!0,message:"请输入案例目标",trigger:"blur"}],knowledgePoints:[{required:!0,validator:function(l,e,g){e[0].point==""?g(new Error("没有对应知识点")):g()},trigger:"change"}]}),H=p([]),Je=()=>{if(A.value!="")if(C.value.knowledgePoints.length>0&&C.value.knowledgePoints[0].point=="")C.value.knowledgePoints[0].point=A.value,A.value="";else{let l=p({id:null,targetId:null,point:A.value});C.value.knowledgePoints.push(l.value),A.value=""}},He=l=>{C.value.knowledgePoints.splice(l,1)},Ke=async l=>{l&&await l.validate((e,g)=>{if(e){let b=Object.assign({},C.value);Nt(f.value,b).then($=>{$.state==200?(H.value=$.data.designs,C.value.targetName="",C.value.knowledgePoints.splice(0,C.value.knowledgePoints.length)):d.error($.message)})}else console.log("error submit!",g)})},Qe=()=>{C.value.targetName="",C.value.knowledgePoints.splice(0,C.value.knowledgePoints.length)},We=l=>{Pt(f.value,l).then(e=>{e.state==200?H.value=e.data.designs:d.error(e.message)})},Xe=()=>{yt(f.value).then(l=>{l.state==200?(c.value==l.data,R.value++):d.error(l.message)})},S=p([]),_e=p(),U=p({id:null,name:"",url:""}),Ye=ie({name:[{required:!0,message:"请输入参考链接名称",trigger:"blur"}],url:[{required:!0,message:"请输入参考链接URL",trigger:"blur"}]}),Ze=async l=>{l&&await l.validate((e,g)=>{if(e){let b=Object.assign({},U.value);s.value.referenceLinkList.push(b),U.value.name="",U.value.url=""}})},el=l=>{s.value.referenceLinkList.splice(l,1)},Y=p(""),ll=()=>{if(Y.value=="")return;let l=p({id:null,name:Y.value});s.value.backDropList.length>0&&s.value.backDropList[0]==null?s.value.backDropList[0]=l.value:s.value.backDropList.push(l.value),Y.value=""},tl=l=>{s.value.backDropList.splice(l,1)},Z=p(""),al=()=>{if(Z.value!=""){let l=p({id:null,name:Z.value});s.value.requirementList.length>0&&s.value.requirementList[0]==null?s.value.requirementList[0]=l.value:s.value.requirementList.push(l.value),Z.value=""}},nl=l=>{s.value.requirementList.splice(l,1)},ee=p(""),ol=()=>{if(ee.value!=""){let l=p({id:null,name:ee.value});s.value.deliverableRequirementList.length>0&&s.value.deliverableRequirementList[0]==null?s.value.deliverableRequirementList[0]=l.value:s.value.deliverableRequirementList.push(l.value),ee.value=""}},ul=l=>{s.value.deliverableRequirementList.splice(l,1)},de=p(),s=p({id:null,contentId:f.value,num:null,taskName:"",taskCover:"",backDropList:[],requirementList:[],deliverableRequirementList:[],referenceLinkList:[],referenceFileList:[]}),sl=ie({taskName:[{required:!0,message:"请输入任务名称",trigger:"blur"}],num:[{required:!0,message:"请输入任务序号",trigger:"blur"}],requirementList:[{required:!0,validator:function(l,e,g){e[0].point==""?g(new Error("没有任务要求")):g()},trigger:"change"}],deliverableRequirementList:[{required:!0,validator:function(l,e,g){e[0].point==""?g(new Error("没有任务交付物要求")):g()},trigger:"change"}]}),il=async l=>{l&&await l.validate((e,g)=>{if(e){if(S.value.length>=5){d.warning("当前最多支持5个任务");return}s.value.contentId=f.value;let b=Object.assign({},s.value);xt(b).then($=>{$.state==200?(S.value=$.data,oe()):d.error($.message)})}})},oe=()=>{s.value.taskName="",s.value.num=null,s.value.taskCover="",s.value.backDropList=[],s.value.deliverableRequirementList=[],s.value.requirementList=[],s.value.referenceLinkList=[]},rl=(l,e)=>{l.state==200&&(S.value=l.data)},dl=l=>{wt(f.value,l).then(e=>{e.state==200?S.value=e.data:d.error(e.message)})},ml=()=>{bt(f.value).then(l=>{l.state==200?(c.value=l.data,R.value++):d.error(l.message)})},le=p(!1),vl=l=>{le.value=!0,s.value=JSON.parse(JSON.stringify(S.value[l])),console.log(l)},pl=l=>{l&&(l.validate((e,g)=>{if(e){let b=Object.assign({},s.value);ht(b).then($=>{$.state==200?(S.value=$.data,oe(),d.success("更新成功")):d.error($.message)})}}),le.value=!1)},fl=()=>{le.value=!1,oe()},me=zl(),te=p(""),gl={excludeKeys:["bold","group-video","fullScreen"]},ke={placeholder:"请输入内容...",MENU_CONF:{}},cl=l=>{me.value=l};ke.MENU_CONF.uploadImage={server:"/dev-api/files/wdupimage",timeout:5*1e3,fieldName:"file",metaWithUrl:!0,maxFileSize:10*1024*1024,base64LimitSize:5*1024,onBeforeUpload(l){return l},onProgress(l){},onSuccess(l,e){},onFailed(l,e){alert(e.message)},onError(l,e,g){alert(e.message),console.error("onError",l,e,g)}};const _l=()=>{document.getElementById("editor-content-view").innerHTML=te.value},kl=()=>{c.value.guidance=te.value;let l=Object.assign({},c.value);Ct(f.value,l).then(e=>{e.state==200?(c.value=e.data,R.value++):d.error(e.message)})},K=p([]),yl=l=>l.size/1024/1024/1024>1?(d({showClose:!0,message:"文件最大不能超过1GB",type:"success"}),!1):!0,bl=l=>{l.state==200&&(K.value=l.data)},Cl=async l=>{await Lt(l).then(e=>{e.state==200?K.value=e.data:d.error("获取资源包失败"+e.message)})},xl=l=>{Vt(f.value,l).then(e=>{e.state==200?K.value=e.data:d.error(e.message)})},ue=p(),wl=l=>{console.log(ue.value);const e=l[0];e.uid=Bl(),ue.value.handleStart(e)},hl=(l,e)=>jl.confirm(`删除 ${l.name} ?`).then(()=>!0,()=>!1),Ll=(l,e)=>{console.log(l);let g=l.id;g&&Dt(g).then(b=>{b.state==200&&d.success("删除成功")})},Vl=()=>{ue.value.submit()},ye=p([]);Ve(()=>{Ol(f.value).then(l=>{l.state==200&&l.data&&ye.value.push(l.data)})});const be=p("default"),G=l=>l!=R.value,B=l=>l==R.value?null:"display:none",Q=()=>{R.value--},Rl=()=>{Rt(f.value).then(l=>{l.state==200?Jl.push({name:V.meta.parentName}):d.error(l.message)})},Tl=l=>{Hl(l).then(e=>{e.state==200?(c.value=e.data,c.value.completion>=6?R.value=6:R.value=c.value.completion+1):d.error(e.message)})},Dl=()=>{Et().then(l=>{l.state==200?P.value=l.data:d.error("获取知识模块异常")})},ql=l=>{$t(l).then(e=>{e.state==200?T.value=e.data:d.error("获取案例知识模块异常")})},El=l=>{Kl(l).then(e=>{e.state==200?H.value=e.data.designs:d.error("获取案例教学设计点异常")})},$l=l=>{Tt(l).then(e=>{e.state==200?S.value=e.data:d.error("获取案例任务列表异常")})},Fl=l=>{Ql(l).then(e=>{e.state==200?te.value=e.data:d.error("获取案例指导异常")})};return Le(()=>{V.params.caseId&&(f.value=V.params.caseId,Tl(f.value),ql(f.value),El(f.value),$l(f.value),Fl(f.value),Cl(f.value)),Dl()}),Ve(()=>{T.value[0]==null&&T.value.splice(0,1)}),Il(()=>{const l=me.value;l!=null&&l.destroy()}),(l,e)=>{const g=Wl,b=Xl,$=Yl,F=Zl,D=et,y=lt,W=tt,i=at,Ce=nt,se=ot,ve=ut,M=st,Nl=it,xe=rt,N=dt,pe=mt,we=vt,Pl=pt,Sl=Al("upload-filled");return u(),v("div",null,[t(F,null,{default:n(()=>[t($,{span:24},{default:n(()=>[t(b,{active:R.value,simple:""},{default:n(()=>[t(g,{title:"基本信息"}),t(g,{title:"上传封面"}),t(g,{title:"知识点"}),t(g,{title:"教学设计"}),t(g,{title:"任务设计"}),t(g,{title:"案例指导"}),t(g,{title:"附件资源"})]),_:1},8,["active"])]),_:1})]),_:1}),o("div",Bt,[o("div",{id:"pane-first",class:"pane",key:"0","aria-hidden":G(0),style:j(B(0))},[t(W,{ref_key:"contentFormRef",ref:ge,model:c.value,rules:Te,"label-width":"120px",class:"contentForm"},{default:n(()=>[t(y,{label:"案例名称",prop:"name"},{default:n(()=>[t(D,{modelValue:c.value.name,"onUpdate:modelValue":e[0]||(e[0]=a=>c.value.name=a)},null,8,["modelValue"])]),_:1}),t(y,{label:"案例简介",prop:"introduction"},{default:n(()=>[t(D,{type:"textarea",autosize:{minRows:2,maxRows:4},modelValue:c.value.introduction,"onUpdate:modelValue":e[1]||(e[1]=a=>c.value.introduction=a)},null,8,["modelValue"])]),_:1}),t(y,{label:"案例介绍",prop:"introduce"},{default:n(()=>[t(D,{type:"textarea",autosize:{minRows:2,maxRows:4},modelValue:c.value.introduce,"onUpdate:modelValue":e[2]||(e[2]=a=>c.value.introduce=a)},null,8,["modelValue"])]),_:1}),t(y,{label:"案例目标",prop:"target"},{default:n(()=>[t(D,{type:"textarea",autosize:{minRows:2,maxRows:4},modelValue:c.value.target,"onUpdate:modelValue":e[3]||(e[3]=a=>c.value.target=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),t(F,{class:"bottom-row"},{default:n(()=>[R.value<6?(u(),q(i,{key:0,type:"primary",onClick:e[4]||(e[4]=a=>De(ge.value))},{default:n(()=>e[42]||(e[42]=[m("下一步",-1)])),_:1,__:[42]})):z("",!0)]),_:1})],12,jt),o("div",{id:"pane-second",class:"pane",key:"1","aria-hidden":G(1),style:j(B(1))},[o("div",Ht,[t(se,{class:"cover-uploader",action:"/dev-api/content/add_cover/"+f.value,headers:ne.value,"show-file-list":!1,"on-success":qe,"before-upload":Ee},{default:n(()=>[c.value.cover?(u(),v("img",{key:0,src:"/local-resource/image/"+c.value.cover,class:"cover"},null,8,Kt)):(u(),q(Ce,{key:1,class:"cover-uploader-icon"},{default:n(()=>[t(x(fe))]),_:1}))]),_:1},8,["action","headers"])]),t(F,{class:"bottom-row"},{default:n(()=>[t(i,{onClick:Q},{default:n(()=>e[43]||(e[43]=[m("上一步",-1)])),_:1,__:[43]}),t(i,{type:"primary",onClick:e[5]||(e[5]=a=>$e())},{default:n(()=>e[44]||(e[44]=[m("下一步",-1)])),_:1,__:[44]})]),_:1})],12,Jt),o("div",{id:"pane-third",class:"pane",key:"2","aria-hidden":G(2),style:j(B(2))},[o("div",null,[t(F,{style:{margin:"20px 0px"}},{default:n(()=>e[45]||(e[45]=[o("span",null,"本案例的功能模块",-1)])),_:1,__:[45]}),T.value.length<1||T.value[0]!=null?(u(),v("div",Wt,[(u(!0),v(w,null,h(T.value.length,a=>(u(),q(ve,{key:a,style:{width:"280px",height:"220px","margin-right":"30px","margin-bottom":"30px"},shadow:"hover"},{header:n(()=>[o("div",Xt,[o("div",null,[o("span",null,L(T.value[a-1].name),1)]),o("div",null,[t(i,{type:"primary",link:"",icon:x(Re),onClick:r=>Ue(a-1)},null,8,["icon","onClick"]),t(i,{type:"danger",link:"",icon:x(re),onClick:r=>Pe(T.value[a-1].id)},null,8,["icon","onClick"])])])]),default:n(()=>[o("div",null,[(u(!0),v(w,null,h(T.value[a-1].children.length,r=>(u(),v("li",{key:r},L(T.value[a-1].children[r-1].name),1))),128))])]),_:2},1024))),128))])):z("",!0)]),o("div",Yt,[t(F,{style:{margin:"20px 0px"}},{default:n(()=>e[46]||(e[46]=[o("span",null,"请从下面选择功能模块添加到本案例",-1)])),_:1,__:[46]}),o("div",Zt,[(u(!0),v(w,null,h(P.value.length,a=>(u(),q(Nl,{key:"module"+a,style:{"margin-top":"10px"},content:Fe(a-1),"raw-content":""},{default:n(()=>[t(M,{style:{"margin-top":"10px","margin-right":"10px"},closable:"",size:"small",onClick:r=>Ne(P.value[a-1].id),onClose:r=>Ae(P.value[a-1].id)},{default:n(()=>[m(L(P.value[a-1].name),1)]),_:2},1032,["onClick","onClose"])]),_:2},1032,["content"]))),128)),t(i,{style:{"margin-top":"10px"},type:"warning",circle:"",icon:x(fe),size:"small",onClick:e[6]||(e[6]=a=>O.value=!0)},null,8,["icon"])])]),t(F,{class:"bottom-row"},{default:n(()=>[t(i,{onClick:Q},{default:n(()=>e[47]||(e[47]=[m("上一步",-1)])),_:1,__:[47]}),t(i,{type:"primary",onClick:e[7]||(e[7]=a=>Se())},{default:n(()=>e[48]||(e[48]=[m("下一步",-1)])),_:1,__:[48]})]),_:1}),t(xe,{modelValue:O.value,"onUpdate:modelValue":e[12]||(e[12]=a=>O.value=a),title:"添加模块",width:"70%",onClose:e[13]||(e[13]=a=>Me())},{footer:n(()=>[o("div",la,[t(i,{onClick:e[10]||(e[10]=a=>O.value=!1)},{default:n(()=>e[49]||(e[49]=[m("取消",-1)])),_:1,__:[49]}),t(i,{type:"primary",onClick:e[11]||(e[11]=a=>Ie())},{default:n(()=>e[50]||(e[50]=[m(" 确定 ",-1)])),_:1,__:[50]})])]),default:n(()=>[o("div",null,[t(W,{"label-width":"100px"},{default:n(()=>[t(y,{label:"模块名称:"},{default:n(()=>[t(D,{modelValue:k.value.name,"onUpdate:modelValue":e[8]||(e[8]=a=>k.value.name=a),placeholder:"输入模块名称"},null,8,["modelValue"])]),_:1}),t(y,{label:"知识点:"},{default:n(()=>[o("div",null,[(u(!0),v(w,null,h(k.value.children,(a,r)=>(u(),q(M,{key:"tag_concept"+r,closable:"",onClose:he=>ze(r),style:{"margin-right":"10px"}},{default:n(()=>[m(L(a.name),1)]),_:2},1032,["onClose"]))),128))])]),_:1})]),_:1})]),o("div",ea,[(u(!0),v(w,null,h(J.value,(a,r)=>(u(),q(M,{key:"concept"+a.id,closable:"",onClick:he=>Oe(r),style:{"margin-top":"10px","margin-right":"10px"},onClose:he=>Be(a.id)},{default:n(()=>[m(L(a.name),1)]),_:2},1032,["onClick","onClose"]))),128)),t(i,{style:{"margin-top":"10px"},type:"warning",circle:"",icon:x(fe),size:"small",onClick:e[9]||(e[9]=a=>I.value=!0)},null,8,["icon"])])]),_:1},8,["modelValue"]),t(xe,{modelValue:I.value,"onUpdate:modelValue":e[17]||(e[17]=a=>I.value=a),title:"添加知识点",width:"40%"},{footer:n(()=>[o("div",ta,[t(i,{onClick:e[15]||(e[15]=a=>I.value=!1)},{default:n(()=>e[51]||(e[51]=[m("取消",-1)])),_:1,__:[51]}),t(i,{type:"primary",onClick:e[16]||(e[16]=a=>Ge())},{default:n(()=>e[52]||(e[52]=[m(" 确定 ",-1)])),_:1,__:[52]})])]),default:n(()=>[o("div",null,[t(W,{"label-width":"100px"},{default:n(()=>[t(y,{label:"知识点:"},{default:n(()=>[t(D,{modelValue:X.value.name,"onUpdate:modelValue":e[14]||(e[14]=a=>X.value.name=a),placeholder:"输入知识点"},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1},8,["modelValue"])],12,Qt),o("div",{id:"pane-fourth",class:"pane",key:"3","aria-hidden":G(3),style:j(B(3))},[e[58]||(e[58]=o("div",{style:{margin:"20px 0px"}},[o("span",null," 本节需要明确案例目标和对应知识点的匹配关系 ")],-1)),o("div",na,[t(we,{data:H.value,border:!0,style:{width:"100%"}},{default:n(()=>[t(N,{prop:"targetName",label:"案例目标"}),t(N,{label:"对应知识点"},{default:n(a=>[H.value.length>0&&H.value[0]!=null?(u(),v("div",oa,[(u(!0),v(w,null,h(a.row.knowledgePoints.length,r=>(u(),v("li",null,L(a.row.knowledgePoints[r-1].point),1))),256))])):z("",!0)]),_:1}),t(N,{prop:"",label:"操作",width:"100px"},{default:n(a=>[t(pe,{title:"确定删除吗?",onConfirm:r=>We(a.row.id)},{reference:n(()=>[t(i,{link:"",type:"danger",size:"small",icon:x(re)},null,8,["icon"])]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])]),o("div",ua,[t(ve,{style:{"min-height":"280px"},shadow:"never"},{header:n(()=>e[53]||(e[53]=[o("div",null,[o("span",null,"添加案例目标和对应知识点匹配关系")],-1)])),default:n(()=>[o("div",null,[t(W,{"label-width":"160px",ref_key:"designFormRef",ref:ce,model:C.value,rules:je},{default:n(()=>[t(y,{label:"案例目标：",prop:"targetName"},{default:n(()=>[t(D,{modelValue:C.value.targetName,"onUpdate:modelValue":e[18]||(e[18]=a=>C.value.targetName=a)},null,8,["modelValue"])]),_:1}),t(y,{label:"添加对应知识点：",prop:"knowledgePoints"},{default:n(()=>[C.value.knowledgePoints.length>0&&C.value.knowledgePoints[0].point!=""?(u(),v("div",sa,[(u(!0),v(w,null,h(C.value.knowledgePoints.length,a=>(u(),q(M,{key:a,class:"mx-1",closable:"",onClose:r=>He(a-1)},{default:n(()=>[m(L(C.value.knowledgePoints[a-1].point),1)]),_:2},1032,["onClose"]))),128))])):z("",!0)]),_:1}),t(y,null,{default:n(()=>[t(D,{style:{"max-width":"400px","margin-right":"20px"},modelValue:A.value,"onUpdate:modelValue":e[19]||(e[19]=a=>A.value=a),placeholder:"请分条输入案例目标对应知识点，每一条完成后点击右侧保存"},null,8,["modelValue"]),t(i,{type:"primary",circle:"",size:"small",icon:x(ae),onClick:e[20]||(e[20]=a=>Je())},null,8,["icon"])]),_:1}),t(y,null,{default:n(()=>[t(i,{type:"primary",size:"small",onClick:e[21]||(e[21]=a=>Ke(ce.value))},{default:n(()=>e[54]||(e[54]=[m("添加",-1)])),_:1,__:[54]}),t(i,{size:"small",onClick:e[22]||(e[22]=a=>Qe())},{default:n(()=>e[55]||(e[55]=[m("清除内容",-1)])),_:1,__:[55]})]),_:1})]),_:1},8,["model","rules"])])]),_:1})]),t(F,{class:"bottom-row"},{default:n(()=>[t(i,{onClick:Q},{default:n(()=>e[56]||(e[56]=[m("上一步",-1)])),_:1,__:[56]}),t(i,{type:"primary",onClick:e[23]||(e[23]=a=>Xe())},{default:n(()=>e[57]||(e[57]=[m("下一步",-1)])),_:1,__:[57]})]),_:1})],12,aa),o("div",{id:"pane-fiveth",class:"pane",key:"4","aria-hidden":G(4),style:j(B(4))},[e[68]||(e[68]=o("div",{style:{margin:"30px 0px"}},[o("span",null,"本节需要完善该案例的任务模版")],-1)),o("div",ra,[t(we,{data:S.value,border:!0,style:{width:"100%"}},{default:n(()=>[t(N,{prop:"num",label:"任务序号",width:"60px"}),t(N,{prop:"taskName",label:"任务名称"}),t(N,{label:"任务背景"},{default:n(a=>[o("ol",null,[(u(!0),v(w,null,h(a.row.backDropList.length,r=>(u(),v("li",{key:r},L(a.row.backDropList[r-1].name),1))),128))])]),_:1}),t(N,{label:"任务目的"},{default:n(a=>[o("ol",null,[(u(!0),v(w,null,h(a.row.requirementList.length,r=>(u(),v("li",{key:r},L(a.row.requirementList[r-1].name),1))),128))])]),_:1}),t(N,{label:"任务要求"},{default:n(a=>[o("ol",null,[(u(!0),v(w,null,h(a.row.deliverableRequirementList.length,r=>(u(),v("li",{key:r},L(a.row.deliverableRequirementList[r-1].name),1))),128))])]),_:1}),t(N,{label:"任务参考链接"},{default:n(a=>[o("ol",null,[(u(!0),v(w,null,h(a.row.referenceLinkList.length,r=>(u(),v("li",{key:r},L(a.row.referenceLinkList[r-1].name+"："+a.row.referenceLinkList[r-1].url),1))),128))])]),_:1}),t(N,{label:"任务参考资料"},{default:n(a=>[o("div",null,[o("ol",null,[(u(!0),v(w,null,h(a.row.referenceFileList.length,r=>(u(),v("li",{key:r},L(a.row.referenceFileList[r-1].originFilename),1))),128))])]),o("div",da,[t(se,{class:"upload-demo",headers:ne.value,action:"/dev-api/task_template/task_template_add_resource/"+f.value+"/"+a.row.id,"on-success":rl,"show-file-list":!1},{default:n(()=>[t(i,{type:"primary",size:"small"},{default:n(()=>e[59]||(e[59]=[m("上传",-1)])),_:1,__:[59]})]),_:2},1032,["headers","action"])])]),_:1}),t(N,{prop:"",label:"操作",width:"100px"},{default:n(a=>[t(i,{link:"",type:"primary",size:"small",icon:x(Re),onClick:r=>vl(a.$index)},null,8,["icon","onClick"]),t(pe,{title:"确定删除吗?",onConfirm:r=>dl(a.row.id)},{reference:n(()=>[t(i,{link:"",type:"danger",size:"small",icon:x(re)},null,8,["icon"])]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])]),o("div",ma,[t(ve,{style:{"min-height":"280px"},shadow:"never"},{header:n(()=>[le.value?(u(),v("div",pa,e[61]||(e[61]=[o("span",null,"编辑任务",-1)]))):(u(),v("div",va,e[60]||(e[60]=[o("span",null,"添加任务",-1)])))]),default:n(()=>[o("div",null,[t(W,{"label-width":"400px",ref_key:"addTaskFormRef",ref:de,model:s.value,rules:sl},{default:n(()=>[t(y,{label:"任务名称：",prop:"taskName"},{default:n(()=>[t(D,{style:{"max-width":"400px","margin-right":"20px"},modelValue:s.value.taskName,"onUpdate:modelValue":e[24]||(e[24]=a=>s.value.taskName=a),placeholder:"请输入任务名称"},null,8,["modelValue"])]),_:1}),t(y,{label:"任务序号：",prop:"num"},{default:n(()=>[t(Pl,{min:1,max:10,modelValue:s.value.num,"onUpdate:modelValue":e[25]||(e[25]=a=>s.value.num=a)},null,8,["modelValue"])]),_:1}),t(y,{label:"任务背景：",prop:""},{default:n(()=>[s.value.backDropList.length>0?(u(),v("div",fa,[(u(!0),v(w,null,h(s.value.backDropList.length,a=>(u(),q(M,{closable:"",key:a,class:"mx-1",onClose:r=>tl(a-1)},{default:n(()=>[m(L(s.value.backDropList[a-1].name),1)]),_:2},1032,["onClose"]))),128))])):z("",!0)]),_:1}),t(y,null,{default:n(()=>[t(D,{style:{"max-width":"400px","margin-right":"20px"},modelValue:Y.value,"onUpdate:modelValue":e[26]||(e[26]=a=>Y.value=a),placeholder:"请分条输入实验背景，每一条完成后点击右侧保存"},null,8,["modelValue"]),t(i,{type:"primary",circle:"",size:"small",icon:x(ae),onClick:e[27]||(e[27]=a=>ll())},null,8,["icon"])]),_:1}),t(y,{label:"任务目的（达成什么样的目标）：",prop:"requirementList"},{default:n(()=>[s.value.requirementList.length>0?(u(),v("div",ga,[(u(!0),v(w,null,h(s.value.requirementList.length,a=>(u(),q(M,{closable:"",key:a,class:"mx-1",onClose:r=>nl(a-1)},{default:n(()=>[m(L(s.value.requirementList[a-1].name),1)]),_:2},1032,["onClose"]))),128))])):z("",!0)]),_:1}),t(y,null,{default:n(()=>[t(D,{style:{"max-width":"400px","margin-right":"20px"},modelValue:Z.value,"onUpdate:modelValue":e[28]||(e[28]=a=>Z.value=a),placeholder:"请分条输入任务要求，每一条完成后点击右侧保存"},null,8,["modelValue"]),t(i,{type:"primary",circle:"",size:"small",icon:x(ae),onClick:e[29]||(e[29]=a=>al())},null,8,["icon"])]),_:1}),t(y,{label:"任务要求（必须要完成的内容或提交的内容）：",prop:"deliverableRequirementList"},{default:n(()=>[s.value.deliverableRequirementList.length>0?(u(),v("div",ca,[(u(!0),v(w,null,h(s.value.deliverableRequirementList.length,a=>(u(),q(M,{closable:"",class:"mx-1",key:a,onClose:r=>ul(a-1)},{default:n(()=>[m(L(s.value.deliverableRequirementList[a-1].name),1)]),_:2},1032,["onClose"]))),128))])):z("",!0)]),_:1}),t(y,null,{default:n(()=>[t(D,{style:{"max-width":"400px","margin-right":"20px"},modelValue:ee.value,"onUpdate:modelValue":e[30]||(e[30]=a=>ee.value=a),placeholder:"请分条输入任务交付物要求，每一条完成后点击右侧保存"},null,8,["modelValue"]),t(i,{type:"primary",circle:"",size:"small",icon:x(ae),onClick:e[31]||(e[31]=a=>ol())},null,8,["icon"])]),_:1}),t(y,{label:"任务参考链接：",prop:"referenceLinkList"},{default:n(()=>[s.value.referenceLinkList.length>0?(u(),v("div",_a,[(u(!0),v(w,null,h(s.value.referenceLinkList.length,a=>(u(),q(M,{closable:"",class:"mx-1",key:a,onClose:r=>el(a-1)},{default:n(()=>[m(L(s.value.referenceLinkList[a-1].name+"："+s.value.referenceLinkList[a-1].url),1)]),_:2},1032,["onClose"]))),128))])):z("",!0)]),_:1}),o("div",ka,[t(W,{"label-width":"80px",ref_key:"addReferenceLinkRef",ref:_e,model:U.value,rules:Ye},{default:n(()=>[t(y,{label:"名称：",prop:"name"},{default:n(()=>[t(D,{style:{"max-width":"320px","margin-right":"20px"},modelValue:U.value.name,"onUpdate:modelValue":e[32]||(e[32]=a=>U.value.name=a),placeholder:"请分条输入任务参考链接的名称和URL"},null,8,["modelValue"])]),_:1}),t(y,{label:"url：",prop:"url"},{default:n(()=>[t(D,{style:{"max-width":"320px","margin-right":"20px"},modelValue:U.value.url,"onUpdate:modelValue":e[33]||(e[33]=a=>U.value.url=a),placeholder:"输入完成点击右侧保存"},null,8,["modelValue"]),t(i,{type:"primary",circle:"",size:"small",icon:x(ae),onClick:e[34]||(e[34]=a=>Ze(_e.value))},null,8,["icon"])]),_:1})]),_:1},8,["model","rules"])]),le.value?(u(),q(y,{key:1,style:{"margin-top":"50px"}},{default:n(()=>[t(i,{type:"primary",size:"small",onClick:e[37]||(e[37]=a=>pl(de.value))},{default:n(()=>e[64]||(e[64]=[m("完成",-1)])),_:1,__:[64]}),t(i,{size:"small",onClick:e[38]||(e[38]=a=>fl())},{default:n(()=>e[65]||(e[65]=[m("取消",-1)])),_:1,__:[65]})]),_:1})):(u(),q(y,{key:0,style:{"margin-top":"50px"}},{default:n(()=>[t(i,{type:"primary",size:"small",onClick:e[35]||(e[35]=a=>il(de.value))},{default:n(()=>e[62]||(e[62]=[m("添加任务",-1)])),_:1,__:[62]}),t(i,{size:"small",onClick:e[36]||(e[36]=a=>oe())},{default:n(()=>e[63]||(e[63]=[m("清除内容",-1)])),_:1,__:[63]})]),_:1}))]),_:1},8,["model","rules"])])]),_:1})]),t(F,{class:"bottom-row"},{default:n(()=>[t(i,{onClick:Q},{default:n(()=>e[66]||(e[66]=[m("上一步",-1)])),_:1,__:[66]}),t(i,{type:"primary",onClick:e[39]||(e[39]=a=>ml())},{default:n(()=>e[67]||(e[67]=[m("下一步",-1)])),_:1,__:[67]})]),_:1})],12,ia),o("div",{id:"pane-sixth",class:"pane",key:"5","aria-hidden":G(5),style:j(B(5))},[o("div",ba,[t(x(gt),{style:{"border-bottom":"1px solid #ccc"},editor:me.value,defaultConfig:gl,mode:be.value},null,8,["editor","mode"]),t(x(ct),{style:{height:"500px","overflow-y":"hidden"},modelValue:te.value,"onUpdate:modelValue":e[40]||(e[40]=a=>te.value=a),defaultConfig:ke,mode:be.value,onOnCreated:cl,onOnChange:_l},null,8,["modelValue","mode"])]),t(F,{class:"bottom-row"},{default:n(()=>[t(i,{onClick:Q},{default:n(()=>e[69]||(e[69]=[m("上一步",-1)])),_:1,__:[69]}),t(i,{type:"primary",onClick:e[41]||(e[41]=a=>kl())},{default:n(()=>e[70]||(e[70]=[m("下一步",-1)])),_:1,__:[70]})]),_:1}),e[71]||(e[71]=o("div",{id:"editor-content-view",class:"editor-content-view clearfix"},null,-1))],12,ya),o("div",{id:"pane-seventh",class:"pane",key:"6","aria-hidden":G(6),style:j(B(6))},[o("div",xa,[t(F,null,{default:n(()=>e[72]||(e[72]=[o("span",{style:{"font-size":"1.4rem","font-weight":"bold"}}," 视频介绍 ",-1)])),_:1,__:[72]}),o("div",null,[t(se,{"file-list":ye.value,ref_key:"uploadVideo",ref:ue,class:"upload-video",headers:ne.value,action:"/dev-api/video/upload/"+f.value,"on-remove":Ll,"before-remove":hl,limit:1,"on-exceed":wl,"auto-upload":!1},{trigger:n(()=>[t(i,{size:"small",type:"primary"},{default:n(()=>e[73]||(e[73]=[m("选择文件",-1)])),_:1,__:[73]})]),tip:n(()=>e[75]||(e[75]=[o("div",{class:"el-upload__tip text-red"}," 限制一个视频文件。 ",-1)])),default:n(()=>[t(i,{style:{"margin-left":"20px"},size:"small",type:"primary",onClick:Vl},{default:n(()=>e[74]||(e[74]=[m(" 上传 ",-1)])),_:1,__:[74]})]),_:1},8,["file-list","headers","action"])])]),o("div",wa,[t(F,null,{default:n(()=>e[76]||(e[76]=[o("span",{style:{"font-size":"1.4rem","font-weight":"bold"}}," 附加文件 ",-1)])),_:1,__:[76]}),o("div",ha,[t(se,{class:"upload-demo",drag:"",multiple:"",action:"/dev-api/content/upload_pkg/"+f.value,headers:ne.value,"before-upload":yl,"on-success":bl},{tip:n(()=>e[77]||(e[77]=[o("div",{class:"el-upload__tip"}," 单个文件最大不超过100MB。 ",-1)])),default:n(()=>[t(Ce,{class:"el-icon--upload"},{default:n(()=>[t(Sl)]),_:1}),e[78]||(e[78]=o("div",{class:"el-upload__text"},[m(" Drop file here or "),o("em",null,"click to upload")],-1))]),_:1,__:[78]},8,["action","headers"])]),o("div",null,[(u(!0),v(w,null,h(K.value.length,a=>(u(),q(F,{style:{"text-align":"left"}},{default:n(()=>[t(i,{type:"primary",icon:x(Gl),link:""},{default:n(()=>[m(L(K.value[a-1].originFilename),1)]),_:2},1032,["icon"]),t(pe,{title:"确定删除吗?",onConfirm:r=>xl(K.value[a-1].id)},{reference:n(()=>[t(i,{link:"",type:"danger",size:"small",icon:x(re)},null,8,["icon"])]),_:2},1032,["onConfirm"])]),_:2},1024))),256))])]),t(F,{class:"bottom-row"},{default:n(()=>[t(i,{onClick:Q},{default:n(()=>e[79]||(e[79]=[m("上一步",-1)])),_:1,__:[79]}),t(i,{type:"primary",onClick:Rl},{default:n(()=>e[80]||(e[80]=[m("完成",-1)])),_:1,__:[80]})]),_:1})],12,Ca)])])}}});const $a=ft(La,[["__scopeId","data-v-47661cb7"]]);export{$a as default};
