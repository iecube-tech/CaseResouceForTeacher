import{d as B,b as w,a as n,c as y,g as e,i as p,w as o,F as Q,j as P,n as V,t as z,a5 as te,a6 as ue,ac as ne,b3 as de,$ as Y,h as se,o as Z,k as c,q as G,f,s as X,a0 as h,ax as re,x as ee,ad as le,bk as ae,N as ye,O as ve,a8 as fe,a2 as pe,a3 as ie,S as _e,bl as Ve,a7 as we,u as ce,e as xe}from"./index-8f9ccc2f.js";/* empty css                  */import{_ as H}from"./textPreview.vue_vue_type_script_setup_true_lang-7cc023c2.js";/* empty css                  */import{B as C,S as T,C as qe,G as ge,a as ke,b as Ce,c as Re}from"./block-d7a047ff.js";/* empty css                *//* empty css               */import{G as Ie}from"./getQuestionTemplates-421cb2dc.js";import"./browser-19b77043.js";import"./marked.esm-fed877e7.js";import"./katex-4b21be29.js";import"./purify.es-9c590e79.js";const Ue={class:"ist-theam p-4 bg-gray-50 rounded-lg border-l-4 border-blue-500 scroll-mt-[80px]",tabindex:"0"},Ee={class:"flex flex-col"},Ne={class:"flex items-center nomr"},$e={class:"mr-2"},Le=B({__name:"choice",props:{payload:Object},setup(N){const a=w(N.payload);return(U,m)=>{const s=te,k=ue;return n(),y("div",Ue,[e(H,{content:a.value.question.question},null,8,["content"]),p("div",Ee,[e(k,{modelValue:a.value.question.answer,"onUpdate:modelValue":m[0]||(m[0]=I=>a.value.question.answer=I),class:"flex flex-col items-start scroll-mt-[80px]"},{default:o(()=>[(n(!0),y(Q,null,P(a.value.question.options,I=>(n(),V(s,{class:"rounded hover:bg-gray-100",label:I.label},{default:o(()=>[p("div",Ne,[p("span",$e,z(I.label)+".",1),e(H,{class:"scroll-mt-[80px]",content:I.value},null,8,["content"])])]),_:2},1032,["label"]))),256))]),_:1},8,["modelValue"])])])}}}),Oe={class:"ist-theam p-4 bg-gray-50 rounded-lg border-l-4 border-blue-500 scroll-mt-[80px]",tabindex:"0"},He={class:"flex flex-col"},Ae={class:"flex items-center nomr"},Te={class:"mr-2"},Ge=B({__name:"multipleChoice",props:{payload:Object},setup(N){const a=w(N.payload);return(U,m)=>{const s=ne,k=de;return n(),y("div",Oe,[e(H,{content:a.value.question.question},null,8,["content"]),p("div",He,[e(k,{class:"flex flex-col items-start scroll-mt-[80px]",modelValue:a.value.question.answerOption,"onUpdate:modelValue":m[0]||(m[0]=I=>a.value.question.answerOption=I)},{default:o(()=>[(n(!0),y(Q,null,P(a.value.question.options,I=>(n(),V(s,{class:"rounded hover:bg-gray-100",label:I.label},{default:o(()=>[p("div",Ae,[p("span",Te,z(I.label)+".",1),e(H,{class:"scroll-mt-[80px]",content:I.value},null,8,["content"])])]),_:2},1032,["label"]))),256))]),_:1},8,["modelValue"])])])}}}),Qe={class:"ist-theam p-4 bg-gray-50 rounded-lg border-l-4 border-blue-500 scroll-mt-[80px]",tabindex:"0"},Se={class:"scroll-mt-[80px]"},Pe=B({__name:"qa",props:{payload:Object},setup(N){const a=w(N.payload);return(U,m)=>{const s=Y;return n(),y("div",Qe,[e(H,{content:a.value.question.question},null,8,["content"]),p("div",Se,[e(s,{class:"w-full",type:"textarea",autosize:{minRows:4},placeholder:"作答区域",readonly:"",modelValue:a.value.question.answer,"onUpdate:modelValue":m[0]||(m[0]=k=>a.value.question.answer=k)},null,8,["modelValue"])])])}}});function me(N){return se({url:"/jqt/update",method:"POST",data:N})}const De={class:"ist-theam p-4 scroll-mt-[80px] rounded-lg border-l-4 border-blue-500"},Fe={key:0},ze=["colspan"],Be=["onClick"],je={class:"flex flex-row"},Me=["onClick"],Je={key:0},We={key:0},Xe={key:1},Ke=["onClick"],Ye={key:1,class:"ml-4"},Ze=["onClick"],he={key:0},el={class:"nomr flex flex-row items-center justify-between"},ll=B({__name:"table",props:{id:Number,payload:Object,payloadList:Array},setup(N){const $=N,a=w(!1),U=w(!1),m=w(!1),s=w(),k=w(),I=_=>{s.value=_,a.value=!0},j=(_,u)=>{s.value=_,k.value=u,U.value=!0},S=_=>{for(let u=0;u<i.value.table.tableRow.length;u++)for(let x=0;x<i.value.table.tableRow[u].length;x++)x==_&&(i.value.table.tableRow[u][x].isNeedInput=i.value.table.tableHeader[x].colIsNeedInput)},b=_=>{for(let u=0;u<i.value.table.tableRow.length;u++)for(let x=0;x<i.value.table.tableRow[u].length;x++)x==_&&(i.value.table.tableRow[u][x].isAutoGet=i.value.table.tableHeader[x].colIsAutoGet)},i=w($.payload),A=w(),E=w(),l=_=>{const u={id:$.id,parentId:null,payload:JSON.stringify($.payload)};console.log(u),me(u).then(x=>{x.state==200?_():X.error(x.message)})},d=()=>{m.value=!0},g=_=>{s.value&&(i.value.table.tableHeader[s.value].question=_,m.value=!1)},r=()=>{s.value&&(i.value.table.tableHeader[s.value].question=null)};return Z(()=>{console.log("table"),console.log($.payloadList),A.value=$.payloadList,E.value=A.value.filter(_=>_.payload.type==C.QA),console.log(E.value)}),(_,u)=>{const x=Y,L=h,v=re,R=ee,O=le,F=ae,M=ye,t=ve,be=fe;return n(),y(Q,null,[p("div",De,[p("table",null,[p("thead",null,[i.value.table.tableName?(n(),y("tr",Fe,[p("th",{colspan:i.value.table.tableHeader.length},[e(H,{content:i.value.table.tableName},null,8,["content"])],8,ze)])):c("",!0),p("tr",null,[(n(!0),y(Q,null,P(i.value.table.tableHeader,(q,D)=>(n(),y("th",{onClick:J=>I(D)},[p("div",je,[e(H,{content:q.value},null,8,["content"])])],8,Be))),256))])]),p("tbody",null,[(n(!0),y(Q,null,P(i.value.table.tableRow,(q,D)=>(n(),y("tr",null,[(n(!0),y(Q,null,P(i.value.table.tableRow[D],(J,W)=>(n(),y("td",{onClick:K=>j(D,W)},[J.isNeedInput?(n(),y("div",Je,[J.isAutoGet?(n(),y("div",We,[e(x,{modelValue:i.value.table.tableRow[D][W].stuVlaue,"onUpdate:modelValue":K=>i.value.table.tableRow[D][W].stuVlaue=K,disabled:""},{append:o(()=>u[11]||(u[11]=[p("button",{class:"text-blue-600"},"获取",-1)])),_:2},1032,["modelValue","onUpdate:modelValue"])])):(n(),V(x,{key:1,modelValue:i.value.table.tableRow[D][W].stuVlaue,"onUpdate:modelValue":K=>i.value.table.tableRow[D][W].stuVlaue=K},null,8,["modelValue","onUpdate:modelValue"]))])):(n(),y("div",Xe,[e(H,{content:J.value},null,8,["content"])]))],8,Me))),256))]))),256))])])]),e(F,{modelValue:a.value,"onUpdate:modelValue":u[5]||(u[5]=q=>a.value=q),"show-close":!1,"before-close":l},{header:o(({close:q,titleId:D,titleClass:J})=>[u[12]||(u[12]=p("div",{class:"text-3xl"},"编辑列",-1)),p("button",{onClick:q}," X",8,Ke)]),default:o(()=>[e(O,null,{default:o(()=>[e(L,{label:"列名"},{default:o(()=>[e(x,{modelValue:i.value.table.tableHeader[s.value].value,"onUpdate:modelValue":u[0]||(u[0]=q=>i.value.table.tableHeader[s.value].value=q)},null,8,["modelValue"])]),_:1}),e(L,{label:"列数据需要学生输入"},{default:o(()=>[e(v,{modelValue:i.value.table.tableHeader[s.value].colIsNeedInput,"onUpdate:modelValue":u[1]||(u[1]=q=>i.value.table.tableHeader[s.value].colIsNeedInput=q),onChange:u[2]||(u[2]=q=>S(s.value))},null,8,["modelValue"])]),_:1}),i.value.table.tableHeader[s.value].colIsNeedInput?(n(),V(L,{key:0,label:"列数据自动获取"},{default:o(()=>[e(v,{modelValue:i.value.table.tableHeader[s.value].colIsAutoGet,"onUpdate:modelValue":u[3]||(u[3]=q=>i.value.table.tableHeader[s.value].colIsAutoGet=q),onChange:u[4]||(u[4]=q=>b(s.value))},null,8,["modelValue"])]),_:1})):c("",!0),e(L,{label:"列校验"},{default:o(()=>[e(R,{onClick:d},{default:o(()=>u[13]||(u[13]=[G(" 设置 ",-1)])),_:1,__:[13]}),e(R,{onClick:r},{default:o(()=>u[14]||(u[14]=[G(" 清除 ",-1)])),_:1,__:[14]})]),_:1}),i.value.table.tableHeader[s.value].question?(n(),y("div",Ye,[e(L,{label:"问题"},{default:o(()=>[e(H,{content:i.value.table.tableHeader[s.value].question.question},null,8,["content"])]),_:1}),e(L,{label:"答案"},{default:o(()=>[p("div",null,"["+z(i.value.table.tableHeader[s.value].question.min)+", "+z(i.value.table.tableHeader[s.value].question.max)+"]",1)]),_:1})])):c("",!0)]),_:1})]),_:1},8,["modelValue"]),e(F,{modelValue:U.value,"onUpdate:modelValue":u[9]||(u[9]=q=>U.value=q),"show-close":!1,"before-close":l},{header:o(({close:q,titleId:D,titleClass:J})=>[u[15]||(u[15]=p("div",{class:"text-3xl"},"编辑单元格",-1)),p("button",{onClick:q}," X",8,Ze)]),default:o(()=>[e(O,null,{default:o(()=>[e(L,{label:"单元格数据需要学生输入"},{default:o(()=>[e(v,{modelValue:i.value.table.tableRow[s.value][k.value].isNeedInput,"onUpdate:modelValue":u[6]||(u[6]=q=>i.value.table.tableRow[s.value][k.value].isNeedInput=q)},null,8,["modelValue"])]),_:1}),i.value.table.tableRow[s.value][k.value].isNeedInput?(n(),V(L,{key:0,label:"单元格数据需要自动获取数据"},{default:o(()=>[e(v,{modelValue:i.value.table.tableRow[s.value][k.value].isAutoGet,"onUpdate:modelValue":u[7]||(u[7]=q=>i.value.table.tableRow[s.value][k.value].isAutoGet=q)},null,8,["modelValue"])]),_:1})):(n(),V(L,{key:1,label:"单元格显示内容"},{default:o(()=>[e(x,{modelValue:i.value.table.tableRow[s.value][k.value].value,"onUpdate:modelValue":u[8]||(u[8]=q=>i.value.table.tableRow[s.value][k.value].value=q)},null,8,["modelValue"])]),_:1}))]),_:1})]),_:1},8,["modelValue"]),e(be,{modelValue:m.value,"onUpdate:modelValue":u[10]||(u[10]=q=>m.value=q)},{default:o(()=>[e(t,{data:$.payloadList,style:{width:"100%"}},{default:o(()=>[e(M,{label:"值在区间内"},{default:o(q=>[q.row.payload.type==f(C).RANGE?(n(),y("div",he,[p("div",el,[e(H,{content:q.row.payload.question.question},null,8,["content"]),e(R,{type:"primary",onClick:D=>g(q.row.payload.question)},{default:o(()=>u[16]||(u[16]=[G("设置",-1)])),_:2,__:[16]},1032,["onClick"])])])):c("",!0)]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue"])],64)}}}),al={class:"ist-theam p-4 scroll-mt-[80px] rounded-lg border-l-4 border-blue-500"},ol={key:0},tl=["colspan"],ul=["onClick"],nl={class:"flex flex-row"},dl=["onClick"],sl={key:0},rl={key:0},pl={key:1},il=["onClick"],ml=["onClick"],bl=B({__name:"tracneline",props:{payload:Object,payloadList:Array},setup(N){const $=N,a=w(!1),U=w(!1),m=w(),s=w(),k=E=>{m.value=E,a.value=!0},I=(E,l)=>{m.value=E,s.value=l,U.value=!0},j=E=>{for(let l=0;l<b.value.table.tableRow.length;l++)for(let d=0;d<b.value.table.tableRow[l].length;d++)d==E&&(b.value.table.tableRow[l][d].isNeedInput=b.value.table.tableHeader[d].colIsNeedInput)},S=E=>{for(let l=0;l<b.value.table.tableRow.length;l++)for(let d=0;d<b.value.table.tableRow[l].length;d++)d==E&&(b.value.table.tableRow[l][d].isAutoGet=b.value.table.tableHeader[d].colIsAutoGet)},b=w($.payload),i=w(),A=w();return Z(()=>{i.value=$.payloadList,A.value=i.value.filter(E=>E.type==C.QA),console.log(A.value)}),(E,l)=>{const d=Y,g=h,r=re,_=pe,u=ie,x=le,L=ae;return n(),y(Q,null,[p("div",al,[p("table",null,[p("thead",null,[b.value.table.tableName?(n(),y("tr",ol,[p("th",{colspan:b.value.table.tableHeader.length},[e(H,{content:b.value.table.tableName},null,8,["content"])],8,tl)])):c("",!0),p("tr",null,[(n(!0),y(Q,null,P(b.value.table.tableHeader,(v,R)=>(n(),y("th",{onClick:O=>k(R)},[p("div",nl,[e(H,{content:v.value},null,8,["content"])])],8,ul))),256))])]),p("tbody",null,[(n(!0),y(Q,null,P(b.value.table.tableRow,(v,R)=>(n(),y("tr",null,[(n(!0),y(Q,null,P(b.value.table.tableRow[R],(O,F)=>(n(),y("td",{onClick:M=>I(R,F)},[O.isNeedInput?(n(),y("div",sl,[O.isAutoGet?(n(),y("div",rl,[e(d,{modelValue:b.value.table.tableRow[R][F].stuVlaue,"onUpdate:modelValue":M=>b.value.table.tableRow[R][F].stuVlaue=M,disabled:""},{append:o(()=>l[11]||(l[11]=[p("button",{class:"text-blue-600"},"获取",-1)])),_:2},1032,["modelValue","onUpdate:modelValue"])])):(n(),V(d,{key:1,modelValue:b.value.table.tableRow[R][F].stuVlaue,"onUpdate:modelValue":M=>b.value.table.tableRow[R][F].stuVlaue=M},null,8,["modelValue","onUpdate:modelValue"]))])):(n(),y("div",pl,[e(H,{content:O.value},null,8,["content"])]))],8,dl))),256))]))),256))])])]),e(L,{modelValue:a.value,"onUpdate:modelValue":l[6]||(l[6]=v=>a.value=v),"show-close":!1},{header:o(({close:v,titleId:R,titleClass:O})=>[l[12]||(l[12]=p("div",{class:"text-3xl"},"编辑列",-1)),p("button",{onClick:v}," X",8,il)]),default:o(()=>[e(x,null,{default:o(()=>[e(g,{label:"列名"},{default:o(()=>[e(d,{modelValue:b.value.table.tableHeader[m.value].value,"onUpdate:modelValue":l[0]||(l[0]=v=>b.value.table.tableHeader[m.value].value=v)},null,8,["modelValue"])]),_:1}),e(g,{label:"列数据需要学生输入"},{default:o(()=>[e(r,{modelValue:b.value.table.tableHeader[m.value].colIsNeedInput,"onUpdate:modelValue":l[1]||(l[1]=v=>b.value.table.tableHeader[m.value].colIsNeedInput=v),onChange:l[2]||(l[2]=v=>j(m.value))},null,8,["modelValue"])]),_:1}),b.value.table.tableHeader[m.value].colIsNeedInput?(n(),V(g,{key:0,label:"列数据自动获取"},{default:o(()=>[e(r,{modelValue:b.value.table.tableHeader[m.value].colIsAutoGet,"onUpdate:modelValue":l[3]||(l[3]=v=>b.value.table.tableHeader[m.value].colIsAutoGet=v),onChange:l[4]||(l[4]=v=>S(m.value))},null,8,["modelValue"])]),_:1})):c("",!0),e(g,{label:"列校验"},{default:o(()=>[e(u,{modelValue:b.value.table.tableHeader[m.value].question,"onUpdate:modelValue":l[5]||(l[5]=v=>b.value.table.tableHeader[m.value].question=v),clearable:"","value-on-clear":null,placeholder:"选择相关题目"},{default:o(()=>[(n(!0),y(Q,null,P(A.value,v=>(n(),V(_,{value:v,label:v.question.question},null,8,["value","label"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(L,{modelValue:U.value,"onUpdate:modelValue":l[10]||(l[10]=v=>U.value=v),"show-close":!1},{header:o(({close:v,titleId:R,titleClass:O})=>[l[13]||(l[13]=p("div",{class:"text-3xl"},"编辑单元格",-1)),p("button",{onClick:v}," X",8,ml)]),default:o(()=>[e(x,null,{default:o(()=>[e(g,{label:"单元格数据需要学生输入"},{default:o(()=>[e(r,{modelValue:b.value.table.tableRow[m.value][s.value].isNeedInput,"onUpdate:modelValue":l[7]||(l[7]=v=>b.value.table.tableRow[m.value][s.value].isNeedInput=v)},null,8,["modelValue"])]),_:1}),b.value.table.tableRow[m.value][s.value].isNeedInput?(n(),V(g,{key:0,label:"单元格数据需要自动获取数据"},{default:o(()=>[e(r,{modelValue:b.value.table.tableRow[m.value][s.value].isAutoGet,"onUpdate:modelValue":l[8]||(l[8]=v=>b.value.table.tableRow[m.value][s.value].isAutoGet=v)},null,8,["modelValue"])]),_:1})):(n(),V(g,{key:1,label:"单元格显示内容"},{default:o(()=>[e(d,{modelValue:b.value.table.tableRow[m.value][s.value].value,"onUpdate:modelValue":l[9]||(l[9]=v=>b.value.table.tableRow[m.value][s.value].value=v)},null,8,["modelValue"])]),_:1}))]),_:1})]),_:1},8,["modelValue"])],64)}}}),yl={class:"ist-theam p-4 bg-gray-50 rounded-lg border-l-4 border-blue-500 scroll-mt-[80px] min-h-[200px] flex flex-row justify-center items-center"},vl=B({__name:"circuit",props:{payload:Object},setup(N){return w(N.payload),(a,U)=>(n(),y("div",yl,U[0]||(U[0]=[p("button",{class:"btn bg-blue-500 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-xl shadow-md flex items-center mx-auto"}," 电路检查 ",-1)])))}}),fl={class:"ist-theam p-4 bg-gray-50 rounded-lg border-l-4 border-blue-500 scroll-mt-[80px]",tabindex:"0"},_l={class:"flex flex-col"},Vl=B({__name:"range",props:{payload:Object},setup(N){const a=w(N.payload);return(U,m)=>(n(),y("div",fl,[e(H,{content:a.value.question.question},null,8,["content"]),p("div",_l," ["+z(a.value.question.min)+","+z(a.value.question.max)+"] ",1)]))}}),wl={class:"w-full flex items-center"},cl={class:"flex flex-col"},xl={class:"flex items-center"},ql={class:"mr-2"},gl={class:"w-full flex items-center"},kl={class:"flex items-center"},Cl={class:"mr-2"},oe=B({__name:"editPayload",props:{payload:Object},emits:["submit"],setup(N,{emit:$}){const a=N,U=$,m=w(),s=w(),k=w(),I=w(),j=w();w();const S=_e({stage:[],question:[{type:"string",required:!0,message:"请输入题目问题",trigger:"blur"}],options:[{type:"array",required:!0}],answer:[{type:"string",required:!0,message:"请设置题目答案",trigger:"blur"}],answerOption:[{type:"array",required:!0}],col:[{type:"number",required:!0,min:2,max:10,trigger:"blur"}],row:[{type:"number",required:!0,min:1,max:20,trigger:"blur"}],tableName:[{type:"string",required:!0,message:"请输入表名",trigger:"blur"}],min:[{type:"number",required:!0,trigger:"blur",message:"请设置值"}],max:[{type:"number",required:!0,trigger:"blur",message:"请设置值"}]}),b=w(""),i=()=>{let E={label:qe[a.payload.question.options.length],value:b.value};a.payload.question.options.push(E),b.value=""},A=async E=>{E&&await E.validate((l,d)=>{l?(console.log("submit!"),U("submit")):(console.log(a.payload),console.log("error submit!",d))})};return(E,l)=>{const d=pe,g=ie,r=h,_=Y,u=ee,x=te,L=ue,v=Ve,R=we,O=le,F=ne,M=de;return n(),y("div",null,[e(r,{label:"类型：",prop:"type"},{default:o(()=>[e(g,{modelValue:a.payload.type,"onUpdate:modelValue":l[0]||(l[0]=t=>a.payload.type=t),placeholder:"选择类型"},{default:o(()=>[a.payload.question?(n(),V(d,{key:0,label:"单选",value:f(C).CHOICE},null,8,["value"])):c("",!0),a.payload.question?(n(),V(d,{key:1,label:"多选",value:f(C).MULTIPLECHOICE},null,8,["value"])):c("",!0),a.payload.question?(n(),V(d,{key:2,label:"问答",value:f(C).QA},null,8,["value"])):c("",!0),a.payload.question?(n(),V(d,{key:3,label:"值在区间内",value:f(C).RANGE},null,8,["value"])):c("",!0),a.payload.question?(n(),V(d,{key:4,label:"电路检查",value:f(C).CIRCUIT},null,8,["value"])):c("",!0),a.payload.table?(n(),V(d,{key:5,label:"表格",value:f(C).TABLE},null,8,["value"])):c("",!0),a.payload.table?(n(),V(d,{key:6,label:"描点连线",value:f(C).TRACELINE},null,8,["value"])):c("",!0)]),_:1},8,["modelValue"])]),_:1}),a.payload.type==f(C).CHOICE?(n(),V(O,{key:0,ref_key:"CHOICEFormRef",ref:m,model:a.payload.question,rules:S,"label-width":"auto"},{default:o(()=>[e(r,{label:"阶段：",prop:"stage"},{default:o(()=>[e(g,{modelValue:a.payload.question.stage,"onUpdate:modelValue":l[1]||(l[1]=t=>a.payload.question.stage=t),placeholder:"选择阶段"},{default:o(()=>[e(d,{label:"实验前",value:f(T).befor},null,8,["value"]),e(d,{label:"实验中",value:f(T).experiment},null,8,["value"]),e(d,{label:"实验后",value:f(T).after},null,8,["value"])]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"题目：",prop:"question"},{default:o(()=>[e(_,{modelValue:a.payload.question.question,"onUpdate:modelValue":l[2]||(l[2]=t=>a.payload.question.question=t),type:"textarea",autosize:{minRows:4,maxRows:10},placeholder:"输入题目支持markdown，不要输入题目编号"},null,8,["modelValue"])]),_:1}),e(r,{label:"选项：",prop:"options"},{default:o(()=>[p("div",wl,[e(_,{class:"mr-2",modelValue:b.value,"onUpdate:modelValue":l[3]||(l[3]=t=>b.value=t)},null,8,["modelValue"]),e(u,{type:"primary",size:"small",onClick:i},{default:o(()=>l[45]||(l[45]=[G("添加",-1)])),_:1,__:[45]})]),p("div",cl,[e(L,{modelValue:a.payload.question.answer,"onUpdate:modelValue":l[4]||(l[4]=t=>a.payload.question.answer=t)},{default:o(()=>[(n(!0),y(Q,null,P(a.payload.question.options,t=>(n(),V(x,{label:t.label},{default:o(()=>[p("div",xl,[p("span",ql,z(t.label)+".",1),e(H,{content:t.value},null,8,["content"])])]),_:2},1032,["label"]))),256))]),_:1},8,["modelValue"])])]),_:1}),e(r,{label:"答案：",prop:"answer"},{default:o(()=>[G(z(a.payload.question.answer),1)]),_:1}),e(r,{label:"标签："},{default:o(()=>[e(_,{modelValue:a.payload.question.tag,"onUpdate:modelValue":l[5]||(l[5]=t=>a.payload.question.tag=t),placeholder:"输入题目标签"},null,8,["modelValue"])]),_:1}),e(r,{label:"解析："},{default:o(()=>[e(_,{modelValue:a.payload.question.analysis,"onUpdate:modelValue":l[6]||(l[6]=t=>a.payload.question.analysis=t),type:"textarea",autosize:{minRows:4,maxRows:10},placeholder:"输入题目解析 支持markdown"},null,8,["modelValue"])]),_:1}),e(r,{label:"难度：",prop:"difficulty"},{default:o(()=>[e(v,{modelValue:a.payload.question.difficulty,"onUpdate:modelValue":l[7]||(l[7]=t=>a.payload.question.difficulty=t),min:1,max:10},null,8,["modelValue"])]),_:1}),e(r,{label:"分数：",prop:"score"},{default:o(()=>[e(R,{modelValue:a.payload.question.score,"onUpdate:modelValue":l[8]||(l[8]=t=>a.payload.question.score=t),min:1,max:10},null,8,["modelValue"])]),_:1}),e(r,null,{default:o(()=>[e(u,{type:"primary",onClick:l[9]||(l[9]=t=>A(m.value))},{default:o(()=>l[46]||(l[46]=[G(" 确定 ",-1)])),_:1,__:[46]})]),_:1})]),_:1},8,["model","rules"])):c("",!0),a.payload.type==f(C).MULTIPLECHOICE?(n(),V(O,{key:1,ref_key:"MULTIPLECHOICEFormRef",ref:s,model:a.payload.question,rules:S,"label-width":"auto"},{default:o(()=>[e(r,{label:"阶段：",prop:"stage"},{default:o(()=>[e(g,{modelValue:a.payload.question.stage,"onUpdate:modelValue":l[10]||(l[10]=t=>a.payload.question.stage=t),placeholder:"选择阶段"},{default:o(()=>[e(d,{label:"实验前",value:f(T).befor},null,8,["value"]),e(d,{label:"实验中",value:f(T).experiment},null,8,["value"]),e(d,{label:"实验后",value:f(T).after},null,8,["value"])]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"题目：",prop:"question"},{default:o(()=>[e(_,{modelValue:a.payload.question.question,"onUpdate:modelValue":l[11]||(l[11]=t=>a.payload.question.question=t),type:"textarea",autosize:{minRows:4,maxRows:10},placeholder:"输入题目支持markdown，不要输入题目编号"},null,8,["modelValue"])]),_:1}),e(r,{label:"选项：",prop:"options"},{default:o(()=>[p("div",gl,[e(_,{class:"mr-2",modelValue:b.value,"onUpdate:modelValue":l[12]||(l[12]=t=>b.value=t)},null,8,["modelValue"]),e(u,{type:"primary",size:"small",onClick:i},{default:o(()=>l[47]||(l[47]=[G("添加",-1)])),_:1,__:[47]})]),e(M,{modelValue:a.payload.question.answerOption,"onUpdate:modelValue":l[13]||(l[13]=t=>a.payload.question.answerOption=t)},{default:o(()=>[(n(!0),y(Q,null,P(a.payload.question.options,t=>(n(),V(F,{label:t.label},{default:o(()=>[p("div",kl,[p("span",Cl,z(t.label)+".",1),e(H,{content:t.value},null,8,["content"])])]),_:2},1032,["label"]))),256))]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"答案：",prop:"answerOption"},{default:o(()=>[G(z(a.payload.question.answerOption),1)]),_:1}),e(r,{label:"标签：",prop:"tag"},{default:o(()=>[e(_,{modelValue:a.payload.question.tag,"onUpdate:modelValue":l[14]||(l[14]=t=>a.payload.question.tag=t),placeholder:"输入题目标签"},null,8,["modelValue"])]),_:1}),e(r,{label:"解析：",prop:"analysis"},{default:o(()=>[e(_,{modelValue:a.payload.question.analysis,"onUpdate:modelValue":l[15]||(l[15]=t=>a.payload.question.analysis=t),type:"textarea",autosize:{minRows:4,maxRows:10},placeholder:"输入题目解析 支持markdown"},null,8,["modelValue"])]),_:1}),e(r,{label:"难度：",prop:"difficulty"},{default:o(()=>[e(v,{modelValue:a.payload.question.difficulty,"onUpdate:modelValue":l[16]||(l[16]=t=>a.payload.question.difficulty=t),max:10},null,8,["modelValue"])]),_:1}),e(r,{label:"分数：",prop:"score"},{default:o(()=>[e(R,{modelValue:a.payload.question.score,"onUpdate:modelValue":l[17]||(l[17]=t=>a.payload.question.score=t),min:1,max:10},null,8,["modelValue"])]),_:1}),e(r,null,{default:o(()=>[e(u,{type:"primary",onClick:l[18]||(l[18]=t=>A(s.value))},{default:o(()=>l[48]||(l[48]=[G(" 确定 ",-1)])),_:1,__:[48]})]),_:1})]),_:1},8,["model","rules"])):c("",!0),a.payload.type==f(C).QA||a.payload.type==f(C).CIRCUIT?(n(),V(O,{key:2,ref_key:"QAFormRef",ref:k,model:a.payload.question,rules:S,"label-width":"auto"},{default:o(()=>[e(r,{label:"阶段：",prop:"stage"},{default:o(()=>[e(g,{modelValue:a.payload.question.stage,"onUpdate:modelValue":l[19]||(l[19]=t=>a.payload.question.stage=t),placeholder:"选择阶段"},{default:o(()=>[e(d,{label:"实验前",value:f(T).befor},null,8,["value"]),e(d,{label:"实验中",value:f(T).experiment},null,8,["value"]),e(d,{label:"实验后",value:f(T).after},null,8,["value"])]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"题目：",prop:"question"},{default:o(()=>[e(_,{modelValue:a.payload.question.question,"onUpdate:modelValue":l[20]||(l[20]=t=>a.payload.question.question=t),type:"textarea",autosize:{minRows:4,maxRows:10},placeholder:"输入题目 支持markdown，不要输入题目编号"},null,8,["modelValue"])]),_:1}),e(r,{label:"答案：",prop:"answer"},{default:o(()=>[e(_,{modelValue:a.payload.question.answer,"onUpdate:modelValue":l[21]||(l[21]=t=>a.payload.question.answer=t),type:"textarea",autosize:{minRows:4,maxRows:10},placeholder:"输入题目答案 支持markdown"},null,8,["modelValue"])]),_:1}),e(r,{label:"标签：",prop:"tag"},{default:o(()=>[e(_,{modelValue:a.payload.question.tag,"onUpdate:modelValue":l[22]||(l[22]=t=>a.payload.question.tag=t),placeholder:"输入题目标签"},null,8,["modelValue"])]),_:1}),e(r,{label:"解析：",prop:"analysis"},{default:o(()=>[e(_,{modelValue:a.payload.question.analysis,"onUpdate:modelValue":l[23]||(l[23]=t=>a.payload.question.analysis=t),type:"textarea",autosize:{minRows:4,maxRows:10},placeholder:"输入题目解析 支持markdown"},null,8,["modelValue"])]),_:1}),e(r,{label:"错误引导："},{default:o(()=>[e(_,{modelValue:a.payload.question.hintWhenWrong,"onUpdate:modelValue":l[24]||(l[24]=t=>a.payload.question.hintWhenWrong=t),type:"textarea",autosize:{minRows:4,maxRows:10},placeholder:"输入题目错误指引 支持markdown"},null,8,["modelValue"])]),_:1}),e(r,{label:"难度：",prop:"difficulty"},{default:o(()=>[e(v,{modelValue:a.payload.question.difficulty,"onUpdate:modelValue":l[25]||(l[25]=t=>a.payload.question.difficulty=t),max:10},null,8,["modelValue"])]),_:1}),e(r,{label:"分数：",prop:"score"},{default:o(()=>[e(R,{modelValue:a.payload.question.score,"onUpdate:modelValue":l[26]||(l[26]=t=>a.payload.question.score=t),min:1,max:10},null,8,["modelValue"])]),_:1}),e(r,null,{default:o(()=>[e(u,{type:"primary",onClick:l[27]||(l[27]=t=>A(k.value))},{default:o(()=>l[49]||(l[49]=[G(" 确定 ",-1)])),_:1,__:[49]})]),_:1})]),_:1},8,["model","rules"])):c("",!0),a.payload.type==f(C).TABLE?(n(),V(O,{key:3,ref_key:"TABLEFormRef",ref:I,model:a.payload.table,rules:S,"label-width":"auto"},{default:o(()=>[e(r,{label:"表名：",prop:"tableName"},{default:o(()=>[e(_,{modelValue:a.payload.table.tableName,"onUpdate:modelValue":l[28]||(l[28]=t=>a.payload.table.tableName=t)},null,8,["modelValue"])]),_:1}),e(r,{label:"列数：",prop:"col"},{default:o(()=>[e(R,{modelValue:a.payload.table.col,"onUpdate:modelValue":l[29]||(l[29]=t=>a.payload.table.col=t),min:2,max:10},null,8,["modelValue"])]),_:1}),e(r,{label:"行数：",prop:"row"},{default:o(()=>[e(R,{modelValue:a.payload.table.row,"onUpdate:modelValue":l[30]||(l[30]=t=>a.payload.table.row=t),min:1,max:20},null,8,["modelValue"])]),_:1}),e(r,null,{default:o(()=>[e(u,{type:"primary",onClick:l[31]||(l[31]=t=>A(I.value))},{default:o(()=>l[50]||(l[50]=[G(" 确定 ",-1)])),_:1,__:[50]})]),_:1})]),_:1},8,["model","rules"])):c("",!0),a.payload.type==f(C).TRACELINE?(n(),V(O,{key:4,ref_key:"TRACELINEFormRef",ref:j,model:a.payload.table,rules:S,"label-width":"auto"},{default:o(()=>[e(r,{label:"表名：",prop:"tableName"},{default:o(()=>[e(_,{modelValue:a.payload.table.tableName,"onUpdate:modelValue":l[32]||(l[32]=t=>a.payload.table.tableName=t)},null,8,["modelValue"])]),_:1}),e(r,{label:"列数：",prop:"col"},{default:o(()=>[e(R,{modelValue:a.payload.table.col,"onUpdate:modelValue":l[33]||(l[33]=t=>a.payload.table.col=t),min:2,max:10},null,8,["modelValue"])]),_:1}),e(r,{label:"行数：",prop:"row"},{default:o(()=>[e(R,{modelValue:a.payload.table.row,"onUpdate:modelValue":l[34]||(l[34]=t=>a.payload.table.row=t),min:1,max:20},null,8,["modelValue"])]),_:1}),e(r,null,{default:o(()=>[e(u,{type:"primary",onClick:l[35]||(l[35]=t=>A(j.value))},{default:o(()=>l[51]||(l[51]=[G(" 确定 ",-1)])),_:1,__:[51]})]),_:1})]),_:1},8,["model","rules"])):c("",!0),a.payload.type==f(C).RANGE?(n(),V(O,{key:5,ref_key:"MULTIPLECHOICEFormRef",ref:s,model:a.payload.question,rules:S,"label-width":"auto"},{default:o(()=>[e(r,{label:"阶段：",prop:"stage"},{default:o(()=>[e(g,{modelValue:a.payload.question.stage,"onUpdate:modelValue":l[36]||(l[36]=t=>a.payload.question.stage=t),placeholder:"选择阶段"},{default:o(()=>[e(d,{label:"实验前",value:f(T).befor},null,8,["value"]),e(d,{label:"实验中",value:f(T).experiment},null,8,["value"]),e(d,{label:"实验后",value:f(T).after},null,8,["value"])]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"题目：",prop:"question"},{default:o(()=>[e(_,{modelValue:a.payload.question.question,"onUpdate:modelValue":l[37]||(l[37]=t=>a.payload.question.question=t),type:"textarea",autosize:{minRows:4,maxRows:10},placeholder:"输入题目支持markdown，不要输入题目编号"},null,8,["modelValue"])]),_:1}),e(r,{label:"最小值：",prop:"min"},{default:o(()=>[e(R,{modelValue:a.payload.question.min,"onUpdate:modelValue":l[38]||(l[38]=t=>a.payload.question.min=t),max:a.payload.question.max},null,8,["modelValue","max"])]),_:1}),e(r,{label:"最大值：",prop:"max"},{default:o(()=>[e(R,{modelValue:a.payload.question.max,"onUpdate:modelValue":l[39]||(l[39]=t=>a.payload.question.max=t),min:a.payload.question.min},null,8,["modelValue","min"])]),_:1}),e(r,{label:"标签：",prop:"tag"},{default:o(()=>[e(_,{modelValue:a.payload.question.tag,"onUpdate:modelValue":l[40]||(l[40]=t=>a.payload.question.tag=t),placeholder:"输入题目标签"},null,8,["modelValue"])]),_:1}),e(r,{label:"解析：",prop:"analysis"},{default:o(()=>[e(_,{modelValue:a.payload.question.analysis,"onUpdate:modelValue":l[41]||(l[41]=t=>a.payload.question.analysis=t),type:"textarea",autosize:{minRows:4,maxRows:10},placeholder:"输入题目解析 支持markdown"},null,8,["modelValue"])]),_:1}),e(r,{label:"难度：",prop:"difficulty"},{default:o(()=>[e(v,{modelValue:a.payload.question.difficulty,"onUpdate:modelValue":l[42]||(l[42]=t=>a.payload.question.difficulty=t),max:10},null,8,["modelValue"])]),_:1}),e(r,{label:"分数：",prop:"score"},{default:o(()=>[e(R,{modelValue:a.payload.question.score,"onUpdate:modelValue":l[43]||(l[43]=t=>a.payload.question.score=t),min:1,max:10},null,8,["modelValue"])]),_:1}),e(r,null,{default:o(()=>[e(u,{type:"primary",onClick:l[44]||(l[44]=t=>A(s.value))},{default:o(()=>l[52]||(l[52]=[G(" 确定 ",-1)])),_:1,__:[52]})]),_:1})]),_:1},8,["model","rules"])):c("",!0)])}}});function Rl(N){return se({url:"/jqt/add",method:"POST",data:N})}const Il={class:"mx-4 px-4"},Ul={class:"my-8"},El={key:0,class:"flex flex-row justify-between px-2"},Nl={key:0},$l={key:1},Ll={key:2},Ol=["onClick"],Hl=["onClick"],Al=["onClick"],Wl=B({__name:"labQuestionBank",setup(N){const $=ce(),a=w(),U=w(!1),m=w([]),s=w(),k=w(),I=w(!1),j=()=>{s.value=ge(),U.value=!0},S=()=>{s.value=ke(),U.value=!0},b=()=>{if(s.value.table){for(let d=0;d<s.value.table.col;d++){let g=JSON.parse(JSON.stringify(Ce()));s.value.table.tableHeader.push(g)}for(let d=0;d<s.value.table.row;d++){s.value.table.tableRow.push([]);for(let g=0;g<s.value.table.col;g++){let r=JSON.parse(JSON.stringify(Re()));s.value.table.tableRow[d].push(r)}}}const l={id:null,parentId:a.value,payload:JSON.stringify(s.value)};Rl(l).then(d=>{if(d.state==200){const g={id:d.data.id,parentId:d.data.parentId,payload:JSON.parse(d.data.payload)};m.value.push(g),s.value=null,U.value=!1}else X.error(d.data)})},i=l=>{k.value=l,I.value=!0},A=()=>{const l={id:k.value.id,parentId:k.value.parentId,payload:JSON.stringify(k.value.payload)};me(l).then(d=>{d.state==200?(X.success("更新成功"),k.value=null,I.value=!1):X.error(d.message)})},E=()=>{Ie(a.value).then(l=>{l.state==200?(m.value=[],l.data.forEach(d=>{const g={id:d.id,parentId:d.parentId,payload:JSON.parse(d.payload)};m.value.push(g)})):X.error(l.message)})};return Z(()=>{setTimeout(()=>{a.value=$.params.labId,E()},10)}),(l,d)=>{const g=xe("font-awesome-icon"),r=ee,_=ae;return n(),y(Q,null,[p("div",Il,[(n(!0),y(Q,null,P(m.value,u=>(n(),y("div",Ul,[u.payload.question?(n(),y("div",El,[p("div",null,[u.payload.question.stage==f(T).befor?(n(),y("span",Nl,"实验前")):c("",!0),u.payload.question.stage==f(T).after?(n(),y("span",$l,"实验后")):c("",!0),u.payload.question.stage==f(T).experiment?(n(),y("span",Ll,"实验中")):c("",!0)]),p("div",null,[p("button",{onClick:x=>i(u)},[e(g,{icon:"fa-solid fa-pen-to-square"})],8,Ol)])])):c("",!0),u.payload.type==f(C).CHOICE?(n(),V(Le,{key:1,payload:u.payload},null,8,["payload"])):c("",!0),u.payload.type==f(C).MULTIPLECHOICE?(n(),V(Ge,{key:2,payload:u.payload},null,8,["payload"])):c("",!0),u.payload.type==f(C).QA?(n(),V(Pe,{key:3,payload:u.payload},null,8,["payload"])):c("",!0),u.payload.type==f(C).CIRCUIT?(n(),V(vl,{key:4,payload:u.payload},null,8,["payload"])):c("",!0),u.payload.type==f(C).RANGE?(n(),V(Vl,{key:5,payload:u.payload},null,8,["payload"])):c("",!0),u.payload.type==f(C).TABLE?(n(),V(ll,{key:6,id:u.id,payload:u.payload,payloadList:m.value.filter(x=>x.payload.type==f(C).RANGE)},null,8,["id","payload","payloadList"])):c("",!0),u.payload.type==f(C).TRACELINE?(n(),V(bl,{key:7,id:u.id,payload:u.payload,payloadList:m.value.filter(x=>x.payload.type==f(C).RANGE)},null,8,["id","payload","payloadList"])):c("",!0)]))),256)),p("div",null,[e(r,{type:"primary",style:{"margin-left":"16px"},onClick:j},{default:o(()=>d[2]||(d[2]=[G(" open ",-1)])),_:1,__:[2]}),e(r,{type:"primary",style:{"margin-left":"16px"},onClick:S},{default:o(()=>d[3]||(d[3]=[G(" 表格 ",-1)])),_:1,__:[3]})])]),e(_,{modelValue:U.value,"onUpdate:modelValue":d[0]||(d[0]=u=>U.value=u),"show-close":!1},{header:o(({close:u,titleId:x,titleClass:L})=>[d[4]||(d[4]=p("div",{class:"text-3xl"},"题目设计",-1)),p("button",{onClick:u},[e(g,{icon:"fa-solid fa-xmark"})],8,Hl)]),default:o(()=>[s.value?(n(),V(oe,{key:0,payload:s.value,onSubmit:b},null,8,["payload"])):c("",!0)]),_:1},8,["modelValue"]),e(_,{modelValue:I.value,"onUpdate:modelValue":d[1]||(d[1]=u=>I.value=u),"show-close":!1},{header:o(({close:u,titleId:x,titleClass:L})=>[d[5]||(d[5]=p("div",{class:"text-3xl"},"题目编辑",-1)),p("button",{onClick:u},[e(g,{icon:"fa-solid fa-xmark"})],8,Al)]),default:o(()=>[k.value?(n(),V(oe,{key:0,payload:k.value.payload,onSubmit:A},null,8,["payload"])):c("",!0)]),_:1},8,["modelValue"])],64)}}});export{Wl as default};
