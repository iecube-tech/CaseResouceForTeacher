import{d as N,b as c,z as U,o as M,a,c as n,n as E,k as g,g as h,f as $,w as q,q as ee,$ as X,v as ie,x as ce,y as re,_ as A,F as V,j as w,ac as ve,b3 as pe,a5 as me,a6 as _e,i,s as G,e as te,t as R,h as be,W as Z,u as le,K as ae,bz as ye,D as he,H as Y}from"./index-8f9ccc2f.js";import{u as H,a as se,e as fe,S as ge,b as ke,G as xe}from"./getTaskStudentGroup-1a06cf67.js";import{v as Ve}from"./v5-b62ae20a.js";import{s as K,D as we}from"./browser-19b77043.js";import{_ as ne}from"./logo-629560f5.js";/* empty css               */import"./marked.esm-fed877e7.js";import"./katex-4b21be29.js";import"./purify.es-9c590e79.js";const Se="/assets/aiIcon2-fd5beee7.svg",Ie="6ba7b810-9dad-11d1-80b4-00c04fd430c8";var D=(r=>(r.TEXT="TEXT",r.QA="QA",r.CHOICE="CHOICE",r.TABLE="TABLE",r.TRACELINE="TRACELINE",r))(D||{});const oe=r=>Ve(r.toString(),Ie);function ue(r,b,d){return new Promise((s,l)=>{s()})}const $e=["id","innerHTML"],C=N({__name:"textPreview",props:{id:String,content:String},setup(r){const b=r,d=c();function s(l){return we.sanitize(l)}return U(()=>b.content,(l,u)=>{l&&(d.value=s(K.parse(l)).replace(/<p[^>]*>\s*<\/p>/g,""))}),M(()=>{d.value=s(K.parse(b.content)).replace(/<p[^>]*>\s*<\/p>/g,"")}),(l,u)=>(a(),n("div",{id:r.id,innerHTML:d.value},null,8,$e))}}),Ee=N({__name:"contentStu",props:{blockVo:{type:Object}},setup(r){const b=r,d=c();return M(()=>{d.value=b.blockVo}),(s,l)=>d.value?(a(),E(C,{key:0,class:"ist-theam",content:d.value.content},null,8,["content"])):g("",!0)}}),Ce=["id"],Te=["id"],Ne=["id"],Le=N({__name:"qaStu",props:{blockVo:Object},setup(r){const b=r,d=c();H();const s=c({id:0,STSId:0,status:0,sort:0,type:"",title:"",content:"",catalogue:"",payload:""}),l=c();return M(()=>{s.value=b.blockVo,s.value&&(l.value=JSON.parse(s.value.payload))}),(u,e)=>{const _=X,p=ie,f=ce,m=re;return l.value?(a(),n("div",{key:0,ref_key:"qaRef",ref:d,id:"block"+s.value.id,class:"qa-privew mt-6 p-5 bg-gray-50 rounded-lg border-l-4 border-blue-500 scroll-mt-[80px]"},[h(C,{id:"block-"+$(oe)(s.value.id),class:"ist-theam scroll-mt-[80px]",content:l.value.question==""?"问题":l.value.question},null,8,["id","content"]),l.value.cell.isInput&&!l.value.cell.autoGet?(a(),n("div",{key:0,id:l.value.cell.id,style:{padding:"5px"},class:"scroll-mt-[80px]"},[h(_,{style:{width:"100%"},type:"textarea",autosize:{minRows:4},placeholder:"作答区域",modelValue:l.value.cell.stuValue[l.value.cell.type],"onUpdate:modelValue":e[0]||(e[0]=v=>l.value.cell.stuValue[l.value.cell.type]=v),disabled:""},null,8,["modelValue"])],8,Te)):g("",!0),l.value.cell.isInput&&l.value.cell.autoGet?(a(),n("div",{key:1,id:l.value.cell.id,style:{padding:"5px"},class:"scroll-mt-[80px]"},[h(m,null,{default:q(()=>[h(p,{span:18},{default:q(()=>[h(_,{style:{width:"100%"},type:"textarea",autosize:"",placeholder:"作答区域",disabled:"",modelValue:l.value.cell.stuValue[l.value.cell.type],"onUpdate:modelValue":e[1]||(e[1]=v=>l.value.cell.stuValue[l.value.cell.type]=v)},null,8,["modelValue"])]),_:1}),h(p,{span:6},{default:q(()=>[h(f,{"aria-disabled":!0},{default:q(()=>e[2]||(e[2]=[ee("获取数据",-1)])),_:1,__:[2]})]),_:1})]),_:1})],8,Ne)):g("",!0)],8,Ce)):g("",!0)}}});const Re=A(Le,[["__scopeId","data-v-91fff569"]]),qe=["id"],Me={key:0},ze={key:1},He=N({__name:"choiceStu",props:{blockVo:Object},setup(r){const b=r,d=c();H();const s=c({id:0,STSId:0,status:0,sort:0,type:"",title:"",content:"",catalogue:"",payload:""}),l=c(),u=e=>{};return M(()=>{s.value=b.blockVo,s.value&&(l.value=JSON.parse(s.value.payload))}),(e,_)=>{const p=ve,f=pe,m=me,v=_e;return l.value?(a(),n("div",{key:0,ref_key:"choiceRef",ref:d,id:"block"+s.value.id,class:"ist-theam mt-6 p-5 bg-gray-50 rounded-lg border-l-4 border-blue-500 scroll-mt-[80px]",tabindex:"0",onFocus:_[2]||(_[2]=y=>u(l.value.cell))},[h(C,{id:"block-"+$(oe)(s.value.id),content:l.value.question==""?"问题":l.value.question},null,8,["id","content"]),l.value.isMultiple?(a(),n("div",Me,[h(f,{class:"select-item scroll-mt-[80px]",id:l.value.cell.id,disabled:"",modelValue:l.value.cell.stuValue.array,"onUpdate:modelValue":_[0]||(_[0]=y=>l.value.cell.stuValue.array=y)},{default:q(()=>[(a(!0),n(V,null,w(l.value.options,(y,t)=>(a(),E(p,{class:"rounded hover:bg-gray-100",key:"check-"+s.value.id+"-"+t,label:y,style:{height:"auto"}},{default:q(()=>[h(C,{id:"option-"+s.value.id+"-check-"+t,content:y,class:"scroll-mt-[80px]"},null,8,["id","content"])]),_:2},1032,["label"]))),128))]),_:1},8,["id","modelValue"])])):(a(),n("div",ze,[h(v,{class:"select-item scroll-mt-[80px]",id:l.value.cell.id,disabled:"",modelValue:l.value.cell.stuValue.array[0],"onUpdate:modelValue":_[1]||(_[1]=y=>l.value.cell.stuValue.array[0]=y)},{default:q(()=>[(a(!0),n(V,null,w(l.value.options,(y,t)=>(a(),E(m,{class:"rounded hover:bg-gray-100",label:y,style:{height:"auto"}},{default:q(()=>[h(C,{id:"option-"+s.value.id+"-radio-"+t,content:y,class:"scroll-mt-[80px]"},null,8,["id","content"])]),_:2},1032,["label"]))),256))]),_:1},8,["id","modelValue"])]))],40,qe)):g("",!0)}}});const Oe=A(He,[["__scopeId","data-v-413a16b2"]]),De=["id"],Ue={key:0,class:"table-show-content"},Ge={key:0},je=["colspan"],Pe={style:{display:"flex","flex-direction":"row"}},Ae=["id"],Be=["id"],We=N({__name:"tableStu",props:{blockVo:Object},setup(r){const b=r;c(!1);const d=c(),s=H(),l=c({id:0,STSId:0,status:0,sort:0,type:"",title:"",content:"",catalogue:"",payload:""}),u=c(),e=c();U(()=>s.hasNewVal,async p=>{var f,m,v;if(p&&e.value){if(s.getCellId!=e.value.id)return;((f=e.value)==null?void 0:f.type)=="string"?(e.value.stuValue.string=s.getSelectedValue,console.log("取到实验设备值："+e.value.stuValue.string),s.setHasNewVal(!1),await _(e.value.id),e.value=null):((m=e.value)==null?void 0:m.type)=="number"?(e.value.stuValue.number=s.getSelectedValue,console.log("取到实验设备值："+e.value.stuValue.number),s.setHasNewVal(!1),await _(e.value.id),e.value=null):(G.warning("不支持的数据类型。"),console.log("不支持的数据类型。需要的数据类型："+((v=e.value)==null?void 0:v.type)),e.value=null),e.value=null}});const _=async p=>{console.log("change"+p),l.value.payload=JSON.stringify(u.value),await ue(l.value,s.getTaskId)};return M(()=>{l.value=b.blockVo,l.value&&(u.value=JSON.parse(l.value.payload))}),(p,f)=>{var v,y;const m=X;return u.value?(a(),n("div",{key:0,ref_key:"tableRef",ref:d,id:"block"+l.value.id,class:"ist-theam scroll-mt-[80px]"},[u.value.question!==""&&u.value.question!==null?(a(),n("div",Ue,[h(C,{id:"table-view-question"+l.value.id,content:u.value.question},null,8,["id","content"])])):g("",!0),i("table",null,[i("thead",null,[u.value.table.tableName!==""&&u.value.table.tableName!==null?(a(),n("tr",Ge,[i("th",{colspan:(v=u.value.table)==null?void 0:v.tableHeader.length},[h(C,{id:"table-view-tablename"+l.value.id,content:u.value.table.tableName},null,8,["id","content"])],8,je)])):g("",!0),i("tr",null,[(a(!0),n(V,null,w(u.value.table.tableHeader,(t,k)=>(a(),n("th",null,[i("div",Pe,[h(C,{id:t.id,content:t.colName},null,8,["id","content"])])]))),256))])]),i("tbody",null,[(a(!0),n(V,null,w((y=u.value.table)==null?void 0:y.tableColnum[0].length,t=>{var k;return a(),n("tr",null,[(a(!0),n(V,null,w((k=u.value.table)==null?void 0:k.tableColnum,(o,z)=>(a(),n("td",null,[o[t-1].isInput&&!o[t-1].autoGet?(a(),n("div",{key:0,id:o[t-1].id,style:{padding:"2px"},class:"scroll-mt-[80px]"},[h(m,{modelValue:o[t-1].stuValue[o[t-1].type],"onUpdate:modelValue":S=>o[t-1].stuValue[o[t-1].type]=S,disabled:""},null,8,["modelValue","onUpdate:modelValue"])],8,Ae)):o[t-1].isInput&&o[t-1].autoGet?(a(),n("div",{key:1,id:o[t-1].id,class:"scroll-mt-[80px]"},[h(m,{modelValue:o[t-1].stuValue[o[t-1].type],"onUpdate:modelValue":S=>o[t-1].stuValue[o[t-1].type]=S,disabled:""},{append:q(()=>f[0]||(f[0]=[i("button",{class:"text-blue-600",disabled:""},"获取",-1)])),_:2},1032,["modelValue","onUpdate:modelValue"])],8,Be)):(a(),E(C,{key:2,id:o[t-1].id,content:o[t-1].presetValue[o[t-1].type]==""||o[t-1].presetValue[o[t-1].type]==null?"<br />":o[t-1].presetValue[o[t-1].type]},null,8,["id","content"]))]))),256))])}),256))])])],8,De)):g("",!0)}}});const Ye=A(We,[["__scopeId","data-v-424a1c67"]]),Je=["id"],Fe={key:0,class:"table-show-content"},Xe={key:0},Qe=["colspan"],Ze={style:{display:"flex","flex-direction":"row"}},Ke=["id"],et=["id"],tt=N({__name:"tracelineStu",props:{blockVo:Object},setup(r){const b=r;c(!1);const d=c(),s=H(),l=c({id:0,STSId:0,status:0,sort:0,type:"",title:"",content:"",catalogue:"",payload:""}),u=c(),e=c();U(()=>s.hasNewVal,async p=>{var f,m,v;if(p&&e.value){if(s.getCellId!=e.value.id)return;((f=e.value)==null?void 0:f.type)=="string"?(e.value.stuValue.string=s.getSelectedValue,console.log("取到实验设备值："+e.value.stuValue.string),s.setHasNewVal(!1),await _(e.value.id),e.value=null):((m=e.value)==null?void 0:m.type)=="number"?(e.value.stuValue.number=s.getSelectedValue,console.log("取到实验设备值："+e.value.stuValue.number),s.setHasNewVal(!1),await _(e.value.id),e.value=null):(G.warning("不支持的数据类型。"),console.log("不支持的数据类型。需要的数据类型："+((v=e.value)==null?void 0:v.type)),e.value=null),e.value=null}});const _=async p=>{console.log("change"+p),l.value.payload=JSON.stringify(u.value),await ue(l.value,s.getTaskId)};return M(()=>{l.value=b.blockVo,l.value&&(u.value=JSON.parse(l.value.payload))}),(p,f)=>{var v,y;const m=X;return u.value?(a(),n("div",{key:0,ref_key:"tableRef",ref:d,id:"block"+l.value.id,class:"ist-theam scroll-mt-[80px]"},[u.value.question!==""&&u.value.question!==null?(a(),n("div",Fe,[h(C,{id:"table-view-question"+l.value.id,content:u.value.question},null,8,["id","content"])])):g("",!0),i("table",null,[i("thead",null,[u.value.table.tableName!==""&&u.value.table.tableName!==null?(a(),n("tr",Xe,[i("th",{colspan:(v=u.value.table)==null?void 0:v.tableHeader.length},[h(C,{id:"table-view-tablename"+l.value.id,content:u.value.table.tableName},null,8,["id","content"])],8,Qe)])):g("",!0),i("tr",null,[(a(!0),n(V,null,w(u.value.table.tableHeader,(t,k)=>(a(),n("th",null,[i("div",Ze,[h(C,{id:t.id,content:t.colName},null,8,["id","content"])])]))),256))])]),i("tbody",null,[(a(!0),n(V,null,w((y=u.value.table)==null?void 0:y.tableColnum[0].length,t=>{var k;return a(),n("tr",null,[(a(!0),n(V,null,w((k=u.value.table)==null?void 0:k.tableColnum,(o,z)=>(a(),n("td",null,[o[t-1].isInput&&!o[t-1].autoGet?(a(),n("div",{key:0,id:o[t-1].id,style:{padding:"2px"},class:"scroll-mt-[80px]"},[h(m,{modelValue:o[t-1].stuValue[o[t-1].type],"onUpdate:modelValue":S=>o[t-1].stuValue[o[t-1].type]=S,disabled:""},null,8,["modelValue","onUpdate:modelValue"])],8,Ke)):o[t-1].isInput&&o[t-1].autoGet?(a(),n("div",{key:1,id:o[t-1].id,class:"scroll-mt-[80px]"},[h(m,{modelValue:o[t-1].stuValue[o[t-1].type],"onUpdate:modelValue":S=>o[t-1].stuValue[o[t-1].type]=S,disabled:""},{append:q(()=>f[0]||(f[0]=[i("button",{class:"text-blue-600"},"获取",-1)])),_:2},1032,["modelValue","onUpdate:modelValue"])],8,et)):(a(),E(C,{key:2,id:o[t-1].id,content:o[t-1].presetValue[o[t-1].type]==""||o[t-1].presetValue[o[t-1].type]==null?"<br />":o[t-1].presetValue[o[t-1].type]},null,8,["id","content"]))]))),256))])}),256))])])],8,Je)):g("",!0)}}});const lt=A(tt,[["__scopeId","data-v-50c3c798"]]),at={key:0,class:"section-item mb-6"},st={class:"block-container"},nt=N({__name:"sectionView",props:{section:Object},setup(r){const b=r,d=c(),s=c([]);return M(()=>{d.value=b.section,d.value&&d.value.blockVoList?s.value=d.value.blockVoList:G.error("数据加载失败")}),(l,u)=>s.value?(a(),n("div",at,[(a(!0),n(V,null,w(s.value,(e,_)=>(a(),n("div",st,[e.type==$(D).TEXT?(a(),E(Ee,{key:0,blockVo:e},null,8,["blockVo"])):g("",!0),e.type==$(D).QA?(a(),E(Re,{key:1,blockVo:e},null,8,["blockVo"])):g("",!0),e.type==$(D).CHOICE?(a(),E(Oe,{key:2,blockVo:e},null,8,["blockVo"])):g("",!0),e.type==$(D).TABLE?(a(),E(Ye,{key:3,blockVo:e},null,8,["blockVo"])):g("",!0),e.type==$(D).TRACELINE?(a(),E(lt,{key:4,blockVo:e},null,8,["blockVo"])):g("",!0)]))),256))])):g("",!0)}}),ot={key:0,ref:"lab",class:"lab-container"},ut=["id"],dt={class:"text-2xl font-bold mb-6 flex items-center"},it={class:"mb-8 overflow-x-auto"},ct={class:"flex space-x-2 md:space-x-4 min-w-max"},rt={class:"px-3 py-1 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-full text-sm font-medium transition-colors"},vt=["id"],pt=N({__name:"modelView",props:{taskId:{type:Number,required:!0},studentId:{type:Number,required:!0}},setup(r){const b=r;se();const d=c(),s=H();c(!1);const l=()=>{document.addEventListener("click",function(e){e.target.classList.contains("md-image")&&(s.showZoomed=!0,s.setimageSrc(e.target.currentSrc))})},u=()=>new Promise((e,_)=>{fe(b.studentId,b.taskId).then(p=>{p.state==200?(d.value=p.data.labModelVoList,s.setLabModelList(d.value),s.setEmdStudentTask(p.data.emdStudentTask),console.log(d.value),e()):(G.error(p.message),_())})});return M(async()=>{await u(),l()}),(e,_)=>{const p=te("font-awesome-icon");return d.value?(a(),n("div",ot,[(a(!0),n(V,null,w(d.value,(f,m)=>(a(),n("div",{key:"module-"+m,class:"model-item scroll-mt-[80px] card p-8 mb-8",id:"module-"+m},[i("div",dt,[h(p,{icon:f.icon,class:"text-blue-600 mr-3"},null,8,["icon"]),ee(" "+R(f.name),1)]),i("div",it,[i("div",ct,[(a(!0),n(V,null,w(d.value[m].sectionVoList,(v,y)=>(a(),n("button",rt,R("步骤"+(y+1)),1))),256))])]),(a(!0),n(V,null,w(d.value[m].sectionVoList,(v,y)=>(a(),n("div",null,[i("div",{class:"section-container border rounded-lg mb-6 p-6 scroll-mt-[80px]",id:"module-"+m+"step-"+y},[h(nt,{section:v},null,8,["section"])],8,vt)]))),256))],8,ut))),128))],512)):g("",!0)}}});function mt(r){return be({url:"/task/task/"+r,method:"GET"})}const J=(r,b=!0)=>r?b?Z(r).format("YYYY年MM月DD日 HH:mm"):Z(r).format("YYYY年MM月DD日"):"",_t={ref:"nav",class:"bg-white shadow-md sticky top-0 z-50"},bt={class:"container mx-auto px-4 py-3 flex justify-between items-center"},yt={class:"flex items-center"},ht={class:"text-xl font-bold text-gray-800"},ft={key:0,class:"hidden lg:flex items-center space-x-6"},gt=["onClick"],kt={class:"hidden xl:flex items-center space-x-4"},xt={key:0,class:"flex items-center"},Vt={class:"mx-1"},wt={key:1},St=["title"],It={id:"mobile-menu",class:"lg:hidden hidden bg-white shadow-md"},$t={key:0,class:"container mx-auto py-3 px-4 flex flex-col space-y-2"},Et={class:ae(["nav-btn","text-sm","py-1","px-3","text-left","rounded","bg-gray-200","text-gray-700"])},Ct=N({__name:"header",props:{task:Object},setup(r){const b=le(),d=H(),s=r,l=c(),u=c(),e=c(),_=c(),p=c();U(()=>d.labModelList,t=>{l.value=t}),U(()=>d.emdStudentTask,t=>{u.value=t});const f=()=>{var t,k,o;(t=document.getElementById("mobile-menu"))!=null&&t.classList.contains("hidden")?(k=document.getElementById("mobile-menu"))==null||k.classList.remove("hidden"):(o=document.getElementById("mobile-menu"))==null||o.classList.add("hidden")},m=t=>{window.location.hash="module-"+t},v=()=>{var t;ge((t=s.task)==null?void 0:t.id,_.value).then(k=>{k.state==200&&(e.value=k.data)})},y=()=>{ye(_.value).then(t=>{t.state==200&&(p.value=t.data)})};return M(()=>{setTimeout(()=>{_.value=b.params.studentId,y(),v()},10)}),(t,k)=>{var z,S,j,O,B,P;const o=te("font-awesome-icon");return a(),n("nav",_t,[i("div",bt,[i("div",yt,[k[0]||(k[0]=i("img",{src:ne,alt:"IECUBE Logo",class:"w-10 h-10 mr-3"},null,-1)),i("h2",ht,R((z=r.task)==null?void 0:z.taskName),1)]),l.value?(a(),n("div",ft,[(a(!0),n(V,null,w(l.value,(T,W)=>(a(),n("button",{onClick:Q=>m(W),class:ae(["nav-btn","text-sm","py-1","px-3","rounded-full","bg-gray-200","text-gray-700","hover:bg-blue-300","hover:text-white"])},R(T.name),9,gt))),256))])):g("",!0),i("div",kt,[e.value?(a(),n("div",xt,[(a(!0),n(V,null,w(e.value.groupStudents,(T,W)=>(a(),n("span",Vt,R(T.studentName),1))),256))])):(a(),n("div",wt,[i("span",null,R((S=p.value)==null?void 0:S.studentName),1)])),i("span",{class:"text-sm text-gray-600",title:"实验日期:"+$(J)((j=r.task)==null?void 0:j.taskStartTime)+"--"+$(J)((O=r.task)==null?void 0:O.taskEndTime)},R($(J)((B=u.value)==null?void 0:B.startTime,!0))+" - "+R($(J)((P=u.value)==null?void 0:P.endTime,!0)),9,St)]),i("button",{id:"mobile-menu-btn",class:"lg:hidden text-gray-700",onClick:f},[h(o,{icon:"fas fa-bars"})])]),i("div",It,[l.value?(a(),n("div",$t,[(a(!0),n(V,null,w(l.value,T=>(a(),n("button",Et,R(T.name),1))),256))])):g("",!0)])],512)}}}),Tt={class:"mt-16 border-t pt-8 pb-16"},Nt={class:"max-w-4xl mx-auto text-center"},Lt={class:"flex items-center justify-center mb-6"},Rt={class:"text-xl font-bold text-gray-800"},qt=N({__name:"footer",props:{task:Object},setup(r){return(b,d)=>{var s;return a(),n("footer",Tt,[i("div",Nt,[i("div",Lt,[d[0]||(d[0]=i("img",{src:ne,alt:"IECUBE",class:"w-12 h-12 mr-4"},null,-1)),i("h2",Rt,R((s=r.task)==null?void 0:s.taskName),1)]),d[1]||(d[1]=i("div",{class:"text-sm text-gray-500 mt-6"},[i("p",null,"作者：北京曾益慧创科技有限公司"),i("p",null,"版权所有 © 2025 北京曾益慧创科技有限公司 保留所有权利。")],-1))])])}}}),Mt={class:"stu-task"},zt={class:"main-content"},Ht=["title"],Ot=["src"],Dt=N({__name:"labview",setup(r){const b=le(),d=c(),s=c(),l=se(),u=H(),e=c(0),_=c(400),p=c(window.innerWidth-e.value),f=c(!1),m=c(!1),v=c(window.innerWidth),y=c(e.value/(e.value+p.value)),t=c(!1),k=x=>{f.value=!0,t.value=!1,document.documentElement.style.setProperty("--transition-duration","0s"),document.addEventListener("mousemove",o),document.addEventListener("mouseup",z)},o=x=>{const I=new Event("resize");if(window.dispatchEvent(I),f.value){const L=v.value-x.clientX;L>=_.value&&L<=v.value*.5&&(e.value=L,p.value=v.value-L,y.value=e.value/(e.value+p.value))}},z=()=>{f.value=!1,t.value=!0,document.documentElement.style.setProperty("--transition-duration","0.2s"),document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",z)},S=()=>{t.value=!1,m.value=!m.value,l.setChangeRightPaneVisible(m.value),m.value?(e.value=v.value*y.value,e.value>v.value*.5?e.value=v.value*.5:e.value<_.value&&(e.value=_.value),p.value=v.value-e.value):p.value=v.value,setTimeout(()=>{t.value=!0},100)};U(()=>l.changeRightPaneVisible,x=>{if(x==!0){if(m.value)return;S()}if(x==!1){if(!m.value)return;S()}});const j=()=>{t.value=!1,v.value=window.innerWidth,m.value?(e.value=v.value*y.value,e.value>v.value*.5?e.value=v.value*.5:e.value<_.value&&(e.value=_.value),p.value=v.value-e.value):p.value=v.value,setTimeout(()=>{t.value=!0},100)},O=c(),B=()=>{xe(s.value,d.value).then(x=>{x.state==200?O.value=x.data:G.error(x.message)})},P=c(),T=c(),W=x=>new Promise((I,L)=>{mt(x).then(F=>{F.state==200?(T.value=F.data,u.setTaskName(T.value.taskName),I()):(G.error(F.message),L())})}),Q=c(!1),de=()=>{window.addEventListener("hashchange",()=>{const I=window.location.hash;if(I){const L=document.querySelector(I);L&&!Q.value&&L.scrollIntoView({behavior:"smooth",block:"start"})}});const x=window.location.hash;if(x){const I=document.querySelector(x);I&&setTimeout(()=>{I.scrollIntoView({behavior:"smooth"})},300)}};return M(()=>{window.addEventListener("resize",j),setTimeout(()=>{s.value=b.params.studentId,d.value=b.params.taskId,u.setTaskId(d.value),u.setStudentId(s.value),W(d.value),B()},10),P.value&&de()}),he(()=>{window.removeEventListener("resize",j)}),(x,I)=>(a(),n("div",Mt,[i("div",{class:"left-pane",style:Y({width:p.value+"px",transition:t.value?"width 0.3s ease":"none"})},[i("div",{ref_key:"leftC",ref:P,class:"left-container"},[T.value?(a(),E(Ct,{key:0,task:T.value},null,8,["task"])):g("",!0),i("div",zt,[d.value?(a(),E(pt,{key:0,taskId:parseInt(d.value),studentId:parseInt(s.value)},null,8,["taskId","studentId"])):g("",!0)]),h(qt,{task:T.value},null,8,["task"])],512),i("div",{class:"toggle-icon",onClick:S,title:m.value?"隐藏右侧分区":"显示右侧分区"},I[1]||(I[1]=[i("img",{src:Se},null,-1)]),8,Ht)],4),i("div",{class:"resizer",onMousedown:k,style:Y({cursor:f.value?"col-resize":"default"})},null,36),i("div",{class:"right-pane",style:Y({width:e.value+"px",display:m.value?"block":"none",transition:t.value?"width 0.3s ease":"none"})},[i("div",{class:"right-container",style:Y({maxWidth:e.value+"px"})},[O.value?(a(),E(ke,{key:0,chatId:O.value},null,8,["chatId"])):g("",!0)],4)],4),$(u).showZoomed?(a(),n("div",{key:0,class:"overlay",onClick:I[0]||(I[0]=L=>$(u).showZoomed=!1)},[i("img",{src:$(u).getimageSrc,alt:"放大的示例图片",class:"zoomed-image"},null,8,Ot)])):g("",!0)]))}});const Ft=A(Dt,[["__scopeId","data-v-6ba082d7"]]);export{Ft as default};
